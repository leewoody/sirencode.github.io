<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Diablo</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Diablo">
<meta property="og:url" content="https://github.com/sirencode/page/2/index.html">
<meta property="og:site_name" content="Diablo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Diablo">
  
    <link rel="alternative" href="/atom.xml" title="Diablo" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">ShenYonghe</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">ShenYonghe</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">ShenYonghe</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-麦肯锡思维" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/12/27/麦肯锡思维/" class="article-date">
  	<time datetime="2017-12-26T16:00:00.000Z" itemprop="datePublished">2017-12-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/27/麦肯锡思维/">
        麦肯锡思维
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="麦肯锡思维"><a href="#麦肯锡思维" class="headerlink" title="麦肯锡思维"></a>麦肯锡思维</h1><h2 id="第一章-“做正确的事”与”正确地做事”"><a href="#第一章-“做正确的事”与”正确地做事”" class="headerlink" title="第一章 “做正确的事”与”正确地做事”"></a>第一章 “做正确的事”与”正确地做事”</h2><p>###”做正确的事”与”正确地做事”</p>
<ul>
<li>麦肯锡的原则就是既要正确地做事，更要做正确的事。成功的前提是做正确的事。</li>
<li>做正确的事是前提，不要再错误的路上走远。</li>
<li>过去和现在都是暂时的，关键是未来的目标。</li>
<li>当我们开始每项工作前，首先要明确我们要达到的目标，之后在确定正确的去实施。</li>
<li>明确目标能够提示我们哪些工作重要，哪些次要，哪些要当机立断，哪些要等待时机。避免盲目忙乱的无序状态。既要有长期目标，还要有每一步的短期目标。</li>
</ul>
<h3 id="有效的执行力"><a href="#有效的执行力" class="headerlink" title="有效的执行力"></a>有效的执行力</h3><ul>
<li>效率和效能，分别代表着”正确地做事”和”做正确的事”</li>
<li>麦肯锡强调的是在进入工作状态时，首先要明确做正确的事。</li>
<li>从管理角度来讲，一条障碍最小的曲线，也许才是两点间的最短距离。</li>
</ul>
<h3 id="对正确的评估"><a href="#对正确的评估" class="headerlink" title="对正确的评估"></a>对正确的评估</h3><ul>
<li>想要做出正确的判断，只有深入挖掘和掌握事实，根据实际情况，才能把握正确的方向，发现自己的正确与否。(另外，”病人”诉说的情况并不一定是病因。)</li>
<li>发现正确的问题，是做正确的事的第一步。</li>
</ul>
<h3 id="把眼光放得更远一些"><a href="#把眼光放得更远一些" class="headerlink" title="把眼光放得更远一些"></a>把眼光放得更远一些</h3><h3 id="“正确”永远在变化"><a href="#“正确”永远在变化" class="headerlink" title="“正确”永远在变化"></a>“正确”永远在变化</h3><ul>
<li>居安思危，居危思进</li>
</ul>
<p>##第二章 提高效率的二八原则</p>
<h3 id="按事情的重要程度划分先后次序"><a href="#按事情的重要程度划分先后次序" class="headerlink" title="按事情的重要程度划分先后次序"></a>按事情的重要程度划分先后次序</h3><h3 id="重要的少数和不重要的多数"><a href="#重要的少数和不重要的多数" class="headerlink" title="重要的少数和不重要的多数"></a>重要的少数和不重要的多数</h3><ul>
<li>重要而关键的部分总是占少数，而琐碎不重要的部分总是占大多数。</li>
<li>我们发现只要能够掌控最重要的少数因素，那么就意味着掌控了全局。</li>
<li>当今时代早已不再是平均分配的时代，只有紧跟时代形式，抓准市场规律，把重要的少数放在首位，并投入更多的时间和精力，才能更高效地完成工作。</li>
</ul>
<h3 id="做事的秘诀首先是次序的排序"><a href="#做事的秘诀首先是次序的排序" class="headerlink" title="做事的秘诀首先是次序的排序"></a>做事的秘诀首先是次序的排序</h3><ul>
<li>重要 &gt; 紧急</li>
</ul>
<h3 id="做事情前先要精心分好主次"><a href="#做事情前先要精心分好主次" class="headerlink" title="做事情前先要精心分好主次"></a>做事情前先要精心分好主次</h3><p>注意</p>
<ul>
<li>1 明确自己的长远目标</li>
<li>2 现在我要做什么（哪些是需要我来做的，哪些需要交给别人的）</li>
<li>3 什么样的事情给我的回报最高（把自己80%的经历放在最高回报的事情上）</li>
<li>4 要明确做哪些事能给自己满足感(乐趣)。</li>
</ul>
<h3 id="时间管理的”四象限法则”"><a href="#时间管理的”四象限法则”" class="headerlink" title="时间管理的”四象限法则”"></a>时间管理的”四象限法则”</h3><ul>
<li>第一象限：重要且紧急，紧急意味着需要立即做，重要则意味对个人或团队有重大影响。</li>
<li>第二象限：重要不紧急(时间变通)</li>
<li>第三象限：紧急但不重要</li>
<li>第四象限：不重要也不紧急</li>
<li>总结：重要但不紧急的是最重要的事情，应该在这些事情上分配更多的时间和精力。重要紧急的事情很多由重要不紧急转化来的。</li>
</ul>
<h3 id="放在首位的应该是重要的事情"><a href="#放在首位的应该是重要的事情" class="headerlink" title="放在首位的应该是重要的事情"></a>放在首位的应该是重要的事情</h3><p>要事第一</p>
<ul>
<li>为每天的工作制定一个优先表格</li>
<li>做一个进度表，将重要的事情按顺序写下来</li>
<li>在要求自己遵守时间的同时也要求别人遵守时间</li>
</ul>
<h2 id="第三章-让事实自己说话"><a href="#第三章-让事实自己说话" class="headerlink" title="第三章 让事实自己说话"></a>第三章 让事实自己说话</h2><h3 id="以事实为基础"><a href="#以事实为基础" class="headerlink" title="以事实为基础"></a>以事实为基础</h3><ul>
<li>事实使我们用来铺就解决措施道路的基石。</li>
<li>解决问题时的思路遵循三个规则<ul>
<li>1 以事实为基础</li>
<li>2 严格的结构化</li>
<li>3 以假设作为导向</li>
</ul>
</li>
</ul>
<h3 id="不要落入主观陷阱"><a href="#不要落入主观陷阱" class="headerlink" title="不要落入主观陷阱"></a>不要落入主观陷阱</h3><ul>
<li>方案要从实事中来再回归事实中去，不要将它往自己的框架里面加</li>
<li>反省：<ul>
<li>做事的时候是否实事求是，而不是根据猜测或个人的期望<ul>
<li>2 做出判断时，是否允许他人提出意见</li>
<li>3 是不是能采取个人不喜欢可是又有事实依据的行动</li>
<li>4 找不到问题的根源时，是否延迟等到问题确认才去实施的</li>
<li>5 灵感或者内心感受来做决定</li>
<li>6 自己反感，大家都同意的意见，会不会接受</li>
<li>7 身为负责人，能否为了公司的利益不计个人好恶</li>
<li>8 人事问题不惨杂个人意见</li>
<li>9 交往时，未交流就下结论</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第四章-利用关键驱动点直达问题核心"><a href="#第四章-利用关键驱动点直达问题核心" class="headerlink" title="第四章 利用关键驱动点直达问题核心"></a>第四章 利用关键驱动点直达问题核心</h2><h3 id="识别关键驱动点"><a href="#识别关键驱动点" class="headerlink" title="识别关键驱动点"></a>识别关键驱动点</h3><ul>
<li>要学会丢弃所有不重要的因素，只着眼于关键驱动</li>
</ul>
<h3 id="高效率地达到目的"><a href="#高效率地达到目的" class="headerlink" title="高效率地达到目的"></a>高效率地达到目的</h3><h3 id="日常中的关键驱动点"><a href="#日常中的关键驱动点" class="headerlink" title="日常中的关键驱动点"></a>日常中的关键驱动点</h3><ul>
<li>把握关键驱动点<ul>
<li>1 找准正确的方向<ul>
<li>2 大量收集资料，运用逻辑树状图进行分析研究</li>
<li>3 进行头脑风暴（发散思维来打破惯性思维）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第五章-不重叠，不遗漏的MECE分析法"><a href="#第五章-不重叠，不遗漏的MECE分析法" class="headerlink" title="第五章 不重叠，不遗漏的MECE分析法"></a>第五章 不重叠，不遗漏的MECE分析法</h2><h3 id="相互独立，完全穷尽-MECE-读作”me-see”-全称mutually-exclusive-collectively-exhaustive-“相互独立，完全穷尽”"><a href="#相互独立，完全穷尽-MECE-读作”me-see”-全称mutually-exclusive-collectively-exhaustive-“相互独立，完全穷尽”" class="headerlink" title="相互独立，完全穷尽(MECE 读作”me see”,全称mutually exclusive,collectively exhaustive.-“相互独立，完全穷尽”)"></a>相互独立，完全穷尽(MECE 读作”me see”,全称mutually exclusive,collectively exhaustive.-“相互独立，完全穷尽”)</h3><ul>
<li>相互独立可以让问题的各个方面独立呈现，避免混淆</li>
</ul>
<h3 id="列出你的清单"><a href="#列出你的清单" class="headerlink" title="列出你的清单"></a>列出你的清单</h3><ul>
<li>一份完美的清单所包含的一级项目应该在2-5个之间，3个最理想。</li>
<li>运用MECE法则注意事项：<ul>
<li>1 做到全方位，多角度的考虑问题。(此处推荐六顶思考帽)</li>
<li>2 尽可能多地收集事实依据</li>
<li>3 利用图表分析问题</li>
</ul>
</li>
</ul>
<h2 id="第六章用逻辑分析法呈现严禁推理"><a href="#第六章用逻辑分析法呈现严禁推理" class="headerlink" title="第六章用逻辑分析法呈现严禁推理"></a>第六章用逻辑分析法呈现严禁推理</h2><h3 id="从树干到树枝"><a href="#从树干到树枝" class="headerlink" title="从树干到树枝"></a>从树干到树枝</h3><ul>
<li>罗分析法：分层罗列问题的所有子问题，逐层向下扩展分析。</li>
<li>议题树，假设树和是否树<h3 id="逻辑思维解决复杂问题"><a href="#逻辑思维解决复杂问题" class="headerlink" title="逻辑思维解决复杂问题"></a>逻辑思维解决复杂问题</h3></li>
<li>逻辑推理过程<ul>
<li>第一步：确认需要解决的问题(必须是具体的，其内容必须单一，不可出现组合)<ul>
<li>第二步：分解问题（用议题树，假设树和是否树分析）</li>
<li>第三步：提出次要问题</li>
<li>第四步：制定详细的工作计划（将思维过程转化为可执行的工作计划）</li>
<li>第五步：进行关键分析（脑暴关键点）</li>
<li>第六步：综合分析调查结果，建立论证</li>
<li>第七步：陈述整个工作过程，进行交流沟通</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第七章循序渐进，先摘好摘的果子"><a href="#第七章循序渐进，先摘好摘的果子" class="headerlink" title="第七章循序渐进，先摘好摘的果子"></a>第七章循序渐进，先摘好摘的果子</h2><h3 id="将简单的部分作为起点，然后有步骤地向前推进，从一个真理推出另一个真理，再逐一推出更多真理，从简单到复杂，从浅显到深刻。"><a href="#将简单的部分作为起点，然后有步骤地向前推进，从一个真理推出另一个真理，再逐一推出更多真理，从简单到复杂，从浅显到深刻。" class="headerlink" title="将简单的部分作为起点，然后有步骤地向前推进，从一个真理推出另一个真理，再逐一推出更多真理，从简单到复杂，从浅显到深刻。"></a>将简单的部分作为起点，然后有步骤地向前推进，从一个真理推出另一个真理，再逐一推出更多真理，从简单到复杂，从浅显到深刻。</h3><h3 id="从选择容易的对象开始"><a href="#从选择容易的对象开始" class="headerlink" title="从选择容易的对象开始"></a>从选择容易的对象开始</h3><h3 id="用最短的时间，做更多更容易的事"><a href="#用最短的时间，做更多更容易的事" class="headerlink" title="用最短的时间，做更多更容易的事"></a>用最短的时间，做更多更容易的事</h3><ul>
<li>一个人的能力不是指他用大量的时间去做一件出人意料的事，相反，是能在最短的时间内，做出最容易的事。<h3 id="化整为零，循序渐进"><a href="#化整为零，循序渐进" class="headerlink" title="化整为零，循序渐进"></a>化整为零，循序渐进</h3><h3 id="用心去摘好摘的果子"><a href="#用心去摘好摘的果子" class="headerlink" title="用心去摘好摘的果子"></a>用心去摘好摘的果子</h3><h3 id="奥卡姆剃刀"><a href="#奥卡姆剃刀" class="headerlink" title="奥卡姆剃刀"></a>奥卡姆剃刀</h3><ul>
<li>我会做的事情只有两件，一件是完成简单的事情，一件是把复杂的事情变得简单。</li>
<li>奥卡姆剃刀：如果有多个理论能够解释同一件事，那么其中最简单，最少假设的那个理论就是最可取的。</li>
<li>如无必要，勿增实体</li>
<li>简化的一些方法：<ul>
<li>1 找到重点</li>
<li>2 提高技术水平</li>
<li>3 授权</li>
<li>4 外包</li>
<li>5 取消</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第八章-一次只需要做好一件事"><a href="#第八章-一次只需要做好一件事" class="headerlink" title="第八章 一次只需要做好一件事"></a>第八章 一次只需要做好一件事</h2><h3 id="专打一个垒"><a href="#专打一个垒" class="headerlink" title="专打一个垒"></a>专打一个垒</h3><ul>
<li>在团队中，努力做好自己分内的事，不要试图将整个团队的工作一人包办</li>
<li>原因：<ul>
<li>第一，你不可能把所有人的工作都一个人干完。<ul>
<li>第二，即使你做到了一次，也会让周围的人对你产生不切实际的想法。</li>
<li>第三，这种期望对你的压力非常大，如果你不能满足大家的期望，那你就在他们心中丧失了信誉，想再挽回就很难了。<h3 id="提高穿透力"><a href="#提高穿透力" class="headerlink" title="提高穿透力"></a>提高穿透力</h3></li>
</ul>
</li>
</ul>
</li>
<li>像订书器一样将精力集中到关键点，这样力更大。</li>
<li>想要把所有事做好，就不可能把重要的事做好。</li>
<li>在工作中不要频繁的转换工作状态，做好一件事再去做别的。</li>
<li>一次只做一件事，提高穿透力，让自己时刻掌握主动权，几点建议<ul>
<li>1 学会摆脱事物 - 拒绝一部分，或分配出一部分</li>
<li>2 学会摆脱人</li>
<li>3 学会摆脱过去 - 过去的错误不应该成为你的包袱，过去的荣誉也不是你长久的资本，摆脱那些干扰，只专注于现在。</li>
</ul>
</li>
</ul>
<h2 id="第九章筛选资料，应对信息干扰"><a href="#第九章筛选资料，应对信息干扰" class="headerlink" title="第九章筛选资料，应对信息干扰"></a>第九章筛选资料，应对信息干扰</h2><h3 id="准备一个大纸篓"><a href="#准备一个大纸篓" class="headerlink" title="准备一个大纸篓"></a>准备一个大纸篓</h3><ul>
<li>文件资料处理意见：<ul>
<li>有些资料需要立即处理，不要耽搁</li>
<li>阅读后保存下来，在阅读时你会发现哪些是你需要的，将其保存。</li>
<li>进一步阅读发现有些东西可以不用，就立即丢掉。</li>
<li>准备一个收纳文件的地方。</li>
</ul>
</li>
</ul>
<h3 id="布里丹选择-（驴，左右两堆草，循环左好右好，饿死）"><a href="#布里丹选择-（驴，左右两堆草，循环左好右好，饿死）" class="headerlink" title="布里丹选择 （驴，左右两堆草，循环左好右好，饿死）"></a>布里丹选择 （驴，左右两堆草，循环左好右好，饿死）</h3><ul>
<li>多个判断点，未做排序，而徘徊不定。</li>
<li>正确的利用信息，首先要对大量的信息做筛选和排序，去粗取精，去伪存真。</li>
</ul>
<h3 id="数字化干扰"><a href="#数字化干扰" class="headerlink" title="数字化干扰"></a>数字化干扰</h3><ul>
<li>过度的信息一旦使人沉溺其中，也会成为一种沉重的负担。</li>
</ul>
<h3 id="头脑内的战争"><a href="#头脑内的战争" class="headerlink" title="头脑内的战争"></a>头脑内的战争</h3><h3 id="设置无干扰区"><a href="#设置无干扰区" class="headerlink" title="设置无干扰区"></a>设置无干扰区</h3><ul>
<li>在特定的时间段对所有的干扰进行屏蔽</li>
</ul>
<h2 id="第十章深陷迷雾时后退一步看清大局"><a href="#第十章深陷迷雾时后退一步看清大局" class="headerlink" title="第十章深陷迷雾时后退一步看清大局"></a>第十章深陷迷雾时后退一步看清大局</h2><h3 id="从选定方向开始"><a href="#从选定方向开始" class="headerlink" title="从选定方向开始"></a>从选定方向开始</h3><ul>
<li>在开始工作之前，你首先要明确自己工作的最终目标是什么。</li>
<li>经常检验一下自己的行进路线，避免因为太匆忙而偏离了方向或迷失了方向。<h3 id="关注”大画面”"><a href="#关注”大画面”" class="headerlink" title="关注”大画面”"></a>关注”大画面”</h3><ul>
<li>一个人如果处于胡乱中，那么就应该主动后退一步，思考一下正在做的事情。</li>
<li>最重要的是关注大画面，你正在做的事是否与大画面吻合。</li>
<li>怎样才能让工作重心和注意力的中心锁定在大画面<ul>
<li>1 简历自己希望的大画面</li>
<li>2 写下你的目标 （贴在显眼的位置）</li>
<li>3 学会切割目标 （庞大的目标往往看上去非常虚幻，容易消磨意志，让人心生疲倦）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="创新要讲究实事求是"><a href="#创新要讲究实事求是" class="headerlink" title="创新要讲究实事求是"></a>创新要讲究实事求是</h3><ul>
<li>对于创新我们应该有一个正确的认识，它的目标是更高效地工作，更完善地发展，如果因为创新而发生停滞甚至倒退的现象，那就不是创新了。</li>
</ul>
<h3 id="认识你自己"><a href="#认识你自己" class="headerlink" title="认识你自己"></a>认识你自己</h3><ul>
<li>在日常忙碌中，不要被纷繁的事情所困扰，要时刻看清自己，胸怀远大的抱负，心中想着宏伟的目标，随时调整自己的方向，调整自己的观念，这样才会获得更高的效能，实现更好的效果。</li>
</ul>
<h2 id="第十一章以矛盾激发思维的”头脑风暴”"><a href="#第十一章以矛盾激发思维的”头脑风暴”" class="headerlink" title="第十一章以矛盾激发思维的”头脑风暴”"></a>第十一章以矛盾激发思维的”头脑风暴”</h2><h3 id="麦肯锡团队的头脑风暴"><a href="#麦肯锡团队的头脑风暴" class="headerlink" title="麦肯锡团队的头脑风暴"></a>麦肯锡团队的头脑风暴</h3><ul>
<li>头脑风暴就像魔方一样，它的每一个面，就是一个事实，而你每一次转动，都会有惊喜的发现，都会得到启发，都会得到答案。</li>
</ul>
<h3 id="头脑风暴的原则"><a href="#头脑风暴的原则" class="headerlink" title="头脑风暴的原则"></a>头脑风暴的原则</h3><ul>
<li>目标：产生新的想法</li>
<li>不需要老生常谈，不要因循守旧，不要人云亦云。</li>
<li>原则：<ul>
<li>1 特定问题的提出（预先给出问题，叫大家做足准备）</li>
<li>2 营造宽松的氛围，不做任何评价</li>
<li>3 对狂热和夸张的想法给予鼓励（大部分创新出自夸张的想法）</li>
<li>4 在观点上追求数量的最大化</li>
<li>5 在集思广益的基础上建立新的观点</li>
<li>6 不要担心你的意见被否决</li>
<li>7 不要忽略简单问题</li>
<li>8 “准备好扼杀自己的婴儿”</li>
<li>9 合理安排时间</li>
<li>10 做好后勤服务工作 （放送时间，事物）</li>
<li>11 用笔写下来</li>
</ul>
</li>
</ul>
<h3 id="完善头脑风暴容易出现的问题"><a href="#完善头脑风暴容易出现的问题" class="headerlink" title="完善头脑风暴容易出现的问题"></a>完善头脑风暴容易出现的问题</h3><ul>
<li>1 头脑风暴法的削弱是由社会惰化造成的 （群体越大，个体付出越少）</li>
<li>2 头脑风暴法中有”冒险转移”的潜在问题</li>
<li>3 对上级的服从观点，妨碍了新观点的产生</li>
</ul>
<h3 id="脑暴注意事项"><a href="#脑暴注意事项" class="headerlink" title="脑暴注意事项"></a>脑暴注意事项</h3><ul>
<li>1 领导尽量回避</li>
<li>2 选择适宜的环境</li>
<li>3 如何认识批评和指责</li>
<li>4 培养创新思维方式</li>
<li>5 要有确定的主题 - 不能偏题</li>
<li>6 对方案最好分析</li>
</ul>
<h2 id="第十二章每天一个图标管理你的工作"><a href="#第十二章每天一个图标管理你的工作" class="headerlink" title="第十二章每天一个图标管理你的工作"></a>第十二章每天一个图标管理你的工作</h2><h3 id="做好一张简单的表格"><a href="#做好一张简单的表格" class="headerlink" title="做好一张简单的表格"></a>做好一张简单的表格</h3><ul>
<li>记录每天最重要的事，或者一闪而过的想法观点</li>
<li>表格的目的：使每天的工作明确</li>
</ul>
<h3 id="工作日志的意义"><a href="#工作日志的意义" class="headerlink" title="工作日志的意义"></a>工作日志的意义</h3><ul>
<li>无论工作还是生活，时常做一些反思，总结一下得失，汲取一些经验教训，这对改进工作，提高生活质量都是大有益处的。</li>
<li>每天无论如何让也要挤出一点时间，把一天的工作像过电影一样回顾一遍，既从中发现自己的成绩，也查找自己的疏漏，看有什么地方需要改进，并做好记录。</li>
<li>好处<ul>
<li>工作日志使你的工作作风更加严谨</li>
<li>增强你的逻辑思维能力</li>
<li>每天变得有意义</li>
<li>通过总结，提高文字表达能力</li>
<li>为后代做一个表率</li>
</ul>
</li>
</ul>
<h3 id="将每日总结作为一种习惯"><a href="#将每日总结作为一种习惯" class="headerlink" title="将每日总结作为一种习惯"></a>将每日总结作为一种习惯</h3><p>作用：</p>
<ul>
<li>省时，是工作总结完善</li>
<li>提高执行力和工作主动性</li>
<li>保证工作的衔接</li>
<li>积累工作经验</li>
</ul>
<h3 id="如何记录工作日志"><a href="#如何记录工作日志" class="headerlink" title="如何记录工作日志"></a>如何记录工作日志</h3><p>注意：</p>
<ul>
<li>1 明确每天开始的第一件事就是制定一天的工作计划。</li>
<li>2 制定计划要严肃认真，不要被干扰。</li>
<li>3 计划要与工作实际相结合，必须是符合实际的，能在当天予以落实。</li>
<li>4 计划一旦制定，就要认真执行</li>
<li>5 总结要突出重点，不用长篇累叙</li>
<li>6 注意阶段性总结，半个月，一个月一次。</li>
</ul>
<h2 id="第十三章迅速沟通的”30秒电梯法则”"><a href="#第十三章迅速沟通的”30秒电梯法则”" class="headerlink" title="第十三章迅速沟通的”30秒电梯法则”"></a>第十三章迅速沟通的”30秒电梯法则”</h2><p>###快速且清晰地表达自己的意图</p>
<ul>
<li>电梯法则真正的核心在于要求当事者在做简要说明时必须谈到问题的核心或站在对方立场上关注他所想看到的并进行强调，且要迅速有力地突出强调，有效地将自己的意思传达给对方，而不要受到其他相关信息的干扰。</li>
</ul>
<h3 id="“知、感、行”"><a href="#“知、感、行”" class="headerlink" title="“知、感、行”"></a>“知、感、行”</h3><ul>
<li>知：你要做的第一步就是要清晰地表达自己，让对方明白你所了解的就是他想明白的事情。</li>
<li>感：在自己表达结束后，必须让对方有想表达自个意愿的意思，当然我们不可能让他一定对我们所说的产生想法，但必须让他明白你通过自我的表达来营销的，而且以此作为自己的个人要求。</li>
<li>行：在清楚地表达自己的观点之后，必须让对方有所行动，例如赞成你的所有观点，并且请你详细地解释你的想法和原因。</li>
</ul>
<h2 id="第十四章在有限的时间内达到目的的走访法则"><a href="#第十四章在有限的时间内达到目的的走访法则" class="headerlink" title="第十四章在有限的时间内达到目的的走访法则"></a>第十四章在有限的时间内达到目的的走访法则</h2><h2 id="第十五章与客户一起工作"><a href="#第十五章与客户一起工作" class="headerlink" title="第十五章与客户一起工作"></a>第十五章与客户一起工作</h2><h3 id="让客户与你站一起"><a href="#让客户与你站一起" class="headerlink" title="让客户与你站一起"></a>让客户与你站一起</h3><h3 id="与客户中的”讨债鬼”打交道"><a href="#与客户中的”讨债鬼”打交道" class="headerlink" title="与客户中的”讨债鬼”打交道"></a>与客户中的”讨债鬼”打交道</h3><ul>
<li>一类是作用不大或者没什么用的人，其二就是有意与你作对的人，最好将这两类人都请出你的团队。<h3 id="不要让客户置身事外"><a href="#不要让客户置身事外" class="headerlink" title="不要让客户置身事外"></a>不要让客户置身事外</h3></li>
</ul>
<h2 id="第十六章一个人不可能煮沸整个海洋"><a href="#第十六章一个人不可能煮沸整个海洋" class="headerlink" title="第十六章一个人不可能煮沸整个海洋"></a>第十六章一个人不可能煮沸整个海洋</h2><h3 id="必要的团队精神"><a href="#必要的团队精神" class="headerlink" title="必要的团队精神"></a>必要的团队精神</h3><ul>
<li>培养团队精神：<ul>
<li>1 建立团队的全局观</li>
<li>2 团队精神大于个人利益</li>
<li>3 听取别人的意见<h3 id="正确组织团队"><a href="#正确组织团队" class="headerlink" title="正确组织团队"></a>正确组织团队</h3><h3 id="破冰游戏"><a href="#破冰游戏" class="headerlink" title="破冰游戏"></a>破冰游戏</h3></li>
</ul>
</li>
<li>破冰：打破人与人之间的隔阂，消除人际交往中的猜疑和疏远。</li>
<li>常用的破冰游戏：集体跳绳和连点游戏</li>
</ul>
<h3 id="在团队中保持高昂的士气"><a href="#在团队中保持高昂的士气" class="headerlink" title="在团队中保持高昂的士气"></a>在团队中保持高昂的士气</h3><ul>
<li>麦肯锡管理者将员工分为四类：<ul>
<li>第一类：工作能力强，工作热情高 - 重用鼓励</li>
<li>第二类：工作能力差，工作热情高 - 培训调用</li>
<li>第三类：工作能力强，工作热情低 - 不录用</li>
<li>第四类：工作能力低，工作热情低 - 不留</li>
</ul>
</li>
<li>保持士气原则<ul>
<li>1 把握团队的温度：做好一件事除了掌握方法，很重要的是要让人们乐于去干，这能产生很大的动力，调动人们的积极性和创造性。</li>
<li>2 掌握稳定的过程：要想让团队的工作顺利进行，就要事先做好周密的计划，确定目标。</li>
<li>3 让大家明白当前工作的目的</li>
<li>4 对团队同事的尊重</li>
<li>5 提倡人性化管理</li>
<li>6 遭遇困境要努力支撑下去<h3 id="团队的内部管理要畅通"><a href="#团队的内部管理要畅通" class="headerlink" title="团队的内部管理要畅通"></a>团队的内部管理要畅通</h3></li>
<li>既要了解领导的意图也要让领导了解团队工作的进展</li>
<li>一个有效的信息一般要具备三个条件：即简洁，完整和结构(结构：先说什么后说什么，内容排版)。<h3 id="为集体做好保密工作"><a href="#为集体做好保密工作" class="headerlink" title="为集体做好保密工作"></a>为集体做好保密工作</h3></li>
</ul>
</li>
</ul>
<h2 id="第十七章请向导引领你走出丛林"><a href="#第十七章请向导引领你走出丛林" class="headerlink" title="第十七章请向导引领你走出丛林"></a>第十七章请向导引领你走出丛林</h2><h3 id="不去重新发明轮子"><a href="#不去重新发明轮子" class="headerlink" title="不去重新发明轮子"></a>不去重新发明轮子</h3><ul>
<li>具体做法的建议<ul>
<li>1 运用现有资源也要考虑具体情况</li>
<li>2 先跟随，再赶超</li>
<li>3 找到最佳经验</li>
</ul>
</li>
</ul>
<h3 id="跟随向导走出荆棘"><a href="#跟随向导走出荆棘" class="headerlink" title="跟随向导走出荆棘"></a>跟随向导走出荆棘</h3><h3 id="找准你的导师"><a href="#找准你的导师" class="headerlink" title="找准你的导师"></a>找准你的导师</h3><ul>
<li>导师：导师就是你所从事行业或专业里学有专长的人，对于你当前的学习和工作，他们可以提供指导，建议和帮助。</li>
<li>戒除“我比别人聪明”的心态</li>
</ul>
<h2 id="第十八章从种子到果实的人才培养法则"><a href="#第十八章从种子到果实的人才培养法则" class="headerlink" title="第十八章从种子到果实的人才培养法则"></a>第十八章从种子到果实的人才培养法则</h2><h3 id="压力面试"><a href="#压力面试" class="headerlink" title="压力面试"></a>压力面试</h3><ul>
<li>波特五力模式：进入壁垒，替代品威胁，买方议价能力，卖方议价能力以及现存竞争者之间的竞争。</li>
<li>在压力下，不要让自己情绪失控，要以自信和冷静的态度和专业上的优势，尽量用事实说明问题，化压力为动力。</li>
</ul>
<h3 id="麦肯锡的与员工培训体系"><a href="#麦肯锡的与员工培训体系" class="headerlink" title="麦肯锡的与员工培训体系"></a>麦肯锡的与员工培训体系</h3><h3 id="方法比知识更重要"><a href="#方法比知识更重要" class="headerlink" title="方法比知识更重要"></a>方法比知识更重要</h3><ul>
<li>形成独立的学习方法，要比获得知识更重要。</li>
<li>学习能力：<ul>
<li>1 学会问”为什么”和”怎么样”</li>
<li>2 学会多角度思考问题</li>
<li>3 改进你的方法<h3 id="不晋则退"><a href="#不晋则退" class="headerlink" title="不晋则退"></a>不晋则退</h3></li>
</ul>
</li>
</ul>
<h2 id="第十九章用外出清单管理琐事"><a href="#第十九章用外出清单管理琐事" class="headerlink" title="第十九章用外出清单管理琐事"></a>第十九章用外出清单管理琐事</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-六顶思考帽" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/09/六顶思考帽/" class="article-date">
  	<time datetime="2017-11-08T16:00:00.000Z" itemprop="datePublished">2017-11-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/09/六顶思考帽/">
        六顶思考帽
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="辩论不是对立面"><a href="#辩论不是对立面" class="headerlink" title="辩论不是对立面"></a>辩论不是对立面</h3><p>辩论只是抓住一个事情的对立面进行讨论，可以想象成这个事情为圆点，辩论的这两个对立观点是圆弧上的两个点。在讨论的过程时辩论双方会根据这两个点扩散一些观点来讨论，这样就会形成两个对角，当扩散的比较广，扩散到180度时，你会发现会形成一个圆，圆心为要讨论的事情。这时你会发现，辩论时只是在完善这个事情一个对立面的描述，当你讨论过广时，就会变成一个圆，是这个事情的描述变得完整。因此辩论不是什么对立面，只是对一个事情的不同观点而已，最终使这个事情的各个方面都更加明显的显现出来。</p>
<h4 id="“我想让你望东方看”和”你一直都在朝东方看”可不是一回事。"><a href="#“我想让你望东方看”和”你一直都在朝东方看”可不是一回事。" class="headerlink" title="“我想让你望东方看”和”你一直都在朝东方看”可不是一回事。"></a>“我想让你望东方看”和”你一直都在朝东方看”可不是一回事。</h4><h3 id="使用问题"><a href="#使用问题" class="headerlink" title="使用问题"></a>使用问题</h3><ul>
<li>不是让特定人扮演一个颜色的帽子，是每个人都扮演不同的帽子。</li>
<li>顺序应该是，就一个事物大家在不同颜色帽子的情况下，发表对应的观点。</li>
<li>大大减少讨论时间，每次提出的观点都不存在对立观点，不需要无意义的讨论。</li>
</ul>
<h3 id="蓝帽-思考的组织者，负责过程控制"><a href="#蓝帽-思考的组织者，负责过程控制" class="headerlink" title="蓝帽:思考的组织者，负责过程控制"></a>蓝帽:思考的组织者，负责过程控制</h3><ul>
<li>蓝帽思考，考察对象不再是主题本身，而是思考本身。</li>
<li>蓝帽框架就像电脑程序一样，为整个时间段内发生的所以的事情进行规划，但更常见的是，蓝帽思考掌控讨论类思考的方式就像马车车夫驾驭马一样，时刻为其指导方向。每个思考方式的叫停，下一个思考方式的选择，结论的总结。</li>
<li>专注：提出正确的问题，定义问题，列出思考任务。</li>
<li>问题-探索式：挂鱼饵，但不清楚最终结果的。射击式：用于检验瞄准点的，其答案要么是要么否。</li>
<li>归纳总结</li>
</ul>
<h3 id="白帽思考：事实和数据，不需要解释，请直讲事实，不要辩论"><a href="#白帽思考：事实和数据，不需要解释，请直讲事实，不要辩论" class="headerlink" title="白帽思考：事实和数据，不需要解释，请直讲事实，不要辩论"></a>白帽思考：事实和数据，不需要解释，请直讲事实，不要辩论</h3><ul>
<li>应该先列举数据，再选结果。</li>
<li>避免陷入信息巨浪，提议进行白帽思考的人可以将要求范围缩小。</li>
<li>认为的事实和核实的事实-未经核实的事实和已核实的事实。</li>
<li>白帽思考时不能提出自己的意见。</li>
<li>观点：西方观念是只有经过辩论才能形成观点，人本人的思维是观点像树苗一样慢慢长出来。</li>
<li>概率的范围 始终如此 往往如此 一般如此 大体上 通常 大约一半概率往往 有时如此 偶尔如此 曾经放生过 绝非如此 不可能如此</li>
<li>行为：像电脑一样给出事实，观点，中立。</li>
<li>作用：获得信息</li>
</ul>
<h3 id="红帽"><a href="#红帽" class="headerlink" title="红帽"></a>红帽</h3><ul>
<li>红帽思考：预感，直觉，印象。无需证明。引发创造性，科学发现或数学上的突破。</li>
<li>任何好的决策最终必然是以情绪的方式表达出来。</li>
<li>鼓励寻找情感的真相。</li>
<li>情绪表达，我要带上红帽告诉你，我不喜欢这次会议进行的方式。<br>降低争吵的概率</li>
<li>用对情绪：思考可以改变情绪，改变情绪的并不是思考的逻辑部分，而是思考的人之部分，如果换一个角度，人的情绪就会随着认知改变放生变化。</li>
<li>确定那一部分受到了情绪化观点的激烈影响，就可以避开。</li>
<li>要克制住为情绪辩解的欲望。</li>
<li>红帽使感情有权大白于天下。</li>
</ul>
<h3 id="黄帽"><a href="#黄帽" class="headerlink" title="黄帽"></a>黄帽</h3><ul>
<li>阳光，光明和乐观。</li>
<li>黄帽思考：寻找某个提议中可能存在的优点。</li>
<li>积极思考，关注利益和优点。</li>
<li>积极的范围：从满怀希望到合乎逻辑。已证实，基于经验和现有知识非常可能，通过不同的事物组合很有可能，有一半的可能，只是有可能，希望渺茫或风险较大。</li>
<li>理由和逻辑：乐观评估可能基于经验，现有信息，逻辑推理，暗示，趋势，猜想和希望得出。</li>
<li>建设性思考，投机与远见。</li>
<li>黄帽思考：探索价值和利益，继而努力发现逻辑证据来支持这一观点。</li>
</ul>
<h3 id="黑帽"><a href="#黑帽" class="headerlink" title="黑帽"></a>黑帽</h3><ul>
<li>黑帽是谨慎之帽，阻止人们做哪些非法，危险，无利可图等事。</li>
<li>黑帽是批判式思维，谨慎和小心，指出困难和问题。</li>
<li>黑帽思考始终是符合逻辑的，必须有合理的逻辑理由才能进行批评。原因必须站得住脚。</li>
<li>列出所有潜在的问题，障碍和难点，以便能够提前规划，克服它们。</li>
<li>大量传统的西式辩论都会攻击对方的讨论过程，如果过程不正确，那么结论必然是错误的。事实上，结论还真有可能是正确的，只是其正确性还没得到证明罢了。</li>
<li>黑帽与”符合”密切相关。提议是否符合过去的经验，政策战略。</li>
<li>过去和未来，影响的范围。</li>
<li>过度批判，有些人只喜欢批判而不提出建设性意见，黑帽也需要做出贡献。</li>
<li>黑帽思维只是客观的列出不足，并不是努力的去吹毛求疵。不是辩论，黑帽思考的目的是在地图上标出谨慎点。</li>
</ul>
<h3 id="绿帽"><a href="#绿帽" class="headerlink" title="绿帽"></a>绿帽</h3><ul>
<li>绿帽代表能量的帽子，代表创造力的思考帽。</li>
<li>绿帽存在的意义就在于，劈出一个特定的时间段，让每个人做一些创造性的工作。</li>
<li>带上绿帽时，你可以提出各种”可能性”。</li>
<li>绿帽思考：创造性思考，新概念，新创意，新视角。备选方案和更多的备选路线。老问题，新方案。</li>
<li>绿帽本身无法让人们更有创造力，但是绿帽能给思考者以时间，让他们专注于创造力。</li>
<li>水平思考：以非正统的方式或者显然地非逻辑的方式来寻求解决问题的办法。</li>
<li>用行动来代替判断。行动是一个动态的过程，而不是一个判断的过程。</li>
<li>激发的必要性：荒诞的逻辑，随机激发。按部就班的逻辑只是人们描述所发生事实的后见之明，意外出现的错误或事故，往往提供了引发新创意所需的刺激。</li>
<li>备选路线：现实中的问题不像数学题只有一个答案，现实中的问题通常不止一个答案。或许某种方案对完成现有任务已经足够了，但那并不意味着就没有更好的方式了。</li>
</ul>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><ul>
<li>单独使用</li>
<li>相继使用</li>
</ul>
<h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><ul>
<li>第一个目的是通过让思考者每次只处理意见事，来简化思考过程。思考着不需要同时应对情感，逻辑，信息，希望，传张高丽，而是逐一应对上述种种。</li>
<li>第二个目的是允许在思考的过程中进行转换。每顶思考帽功能确定，角色扮演，不至于冒犯人。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>思考的最大敌人就是复杂性，因为那会混乱。当思考过程清晰简单，它本身就很愉快，也更有效。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Timing Wheel 定时轮算法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/10/25/Timing Wheel 定时轮算法/" class="article-date">
  	<time datetime="2017-10-24T16:00:00.000Z" itemprop="datePublished">2017-10-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/25/Timing Wheel 定时轮算法/">
        Timing Wheel 定时轮算法
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>我们在做一款期货交易的app，网络部分使用的socket长连接。由于我们的网关服务器性能有限，因此需要在用户不频繁操作的时候，把用户断开。</p>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>每个用户只要5分钟不请求长连接相关接口，我们就自动将用户断开，从而保证我们服务器的负载能力。</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>最简单的实现方式就是使用timer定时器，但是由于timer定时器的性能消耗较大，当有成千上万个连接时，性能消耗是我们无法忍受的。因此我们使用了timing wheel算法，这个算法既保证了功能的实现，又保证了性能。</p>
<h3 id="Timing-Wheel-原理"><a href="#Timing-Wheel-原理" class="headerlink" title="Timing Wheel 原理"></a>Timing Wheel 原理</h3><p><img src="http://img.my.csdn.net/uploads/201209/29/1348926970_9123.png" alt=""></p>
<p>首先要定义三个变量：ticksPerWheel（一轮的tick数），tickDuration（一个tick的持续时间）<br>以及 timeUnit（时间单位），例如 当ticksPerWheel=60，tickDuration=1，timeUnit=秒，这就和现实中的始终的秒针走动完全类似了。</p>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>按照我们的需求来实现：</p>
<ul>
<li>timeUnit = 1s</li>
<li>ticksPerWheel = 5*60</li>
<li><p>tickDuration = 5分钟</p>
</li>
<li><p>1 定义一个线程每秒跳动一下指针</p>
</li>
<li>2 定义一个map key = 刻度(0-299),value = List&lt;用户&gt;</li>
<li>3 每当用户请求接口的时候，就将用户加入当前时间-1秒的那个list里面</li>
<li>4 每当转到对应的刻度就去取一下当前刻度里面的用户列表，并逐一将用户断开连接。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-ConstraintLayout" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/10/13/ConstraintLayout/" class="article-date">
  	<time datetime="2017-10-12T16:00:00.000Z" itemprop="datePublished">2017-10-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/13/ConstraintLayout/">
        ConstraintLayout
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="ConstraintLayout-对象的优势"><a href="#ConstraintLayout-对象的优势" class="headerlink" title="ConstraintLayout 对象的优势"></a>ConstraintLayout 对象的优势</h3><p>如果您使用 ConstraintLayout 来构建相同的布局，XML 文件会包含类似于下面这样的元素层次结构。该布局拥有一个完全扁平的层次结构。这是因为 ConstraintLayout 允许您构建复杂的布局，而不必嵌套 View 和 ViewGroup 元素。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ImageView</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ImageView</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">TextView</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">EditText</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">TextView</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">TextView</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">EditText</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Button</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Button</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">TextView</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用ConstraintLayout布局可以极大降低布局的嵌套层次，避免过度重绘，从而极大提升了绘制的性能，当布局越复杂的时候表现的越明显。</p>
<ul>
<li>布局位置重叠时，后面的在前面的顶层。</li>
</ul>
<h3 id="属性说明"><a href="#属性说明" class="headerlink" title="属性说明"></a>属性说明</h3><h4 id="layout-constraint-本源位置-目标位置-”-目标ID-”"><a href="#layout-constraint-本源位置-目标位置-”-目标ID-”" class="headerlink" title="layout_constraint[本源位置]_[目标位置]=”[目标ID]”"></a>layout_constraint[本源位置]_[目标位置]=”[目标ID]”</h4><p>根据布局中的其他元素或视图, 确定View在屏幕中的位置, 受到三类约束, 即其他视图, 父容器(parent), 基准线(Guideline)。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">layout_constraintLeft_toLeftOf</span><br><span class="line">layout_constraintRight_toLeftOf</span><br><span class="line">layout_constraintRight_toRightOf</span><br><span class="line">layout_constraintTop_toTopOf</span><br><span class="line">layout_constraintTop_toBottomOf</span><br><span class="line">layout_constraintBottom_toTopOf</span><br><span class="line">layout_constraintBottom_toBottomOf</span><br><span class="line">layout_constraintBaseline_toBaselineOf</span><br></pre></td></tr></table></figure>
<h4 id="match-parent-替换"><a href="#match-parent-替换" class="headerlink" title="match_parent 替换"></a>match_parent 替换</h4><p>单个设置：<br>ConstraintLayout也支持自动填充宽高, 把宽高设置为0dp会根据位置自动填充。宽全屏，需要左右和父布局左右相邻，高全屏，需要上下和副布局上下相邻。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;TextView</span><br><span class="line">      android:id=&quot;@+id/textView3&quot;</span><br><span class="line">      android:layout_width=&quot;0dp&quot;</span><br><span class="line">      android:layout_height=&quot;0dp&quot;</span><br><span class="line">      android:layout_marginTop=&quot;16dp&quot;</span><br><span class="line">      android:text=&quot;TextView&quot;</span><br><span class="line">      app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">      app:layout_constraintRight_toRightOf=&quot;parent&quot;</span><br><span class="line">      app:layout_constraintTop_toTopOf=&quot;parent&quot;</span><br><span class="line">      app:layout_constraintBottom_toBottomOf=&quot;parent&quot;/&gt;</span><br></pre></td></tr></table></figure>
<h4 id="控件的高宽比例设置"><a href="#控件的高宽比例设置" class="headerlink" title="控件的高宽比例设置"></a>控件的高宽比例设置</h4><p>ConstraintLayout支持使用constraintDimensionRatio设置宽高的纵横比, 把宽(layout_width)或者高(layout_height)设置为0dp, 则根据另一个属性值和比例, 计算当前属性值.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"200dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@color/colorAccent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:contentDescription</span>=<span class="string">"@null"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:src</span>=<span class="string">"@drawable/total_large"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"@+id/constraintLayout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintDimensionRatio</span>=<span class="string">"4:3"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">"@+id/constraintLayout"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">"@+id/constraintLayout"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="比例方式"><a href="#比例方式" class="headerlink" title="比例方式"></a>比例方式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constraintHorizontal_weight</span><br><span class="line">app:layout_constraintVertical_weight</span><br></pre></td></tr></table></figure>
<h4 id="Guidelines"><a href="#Guidelines" class="headerlink" title="Guidelines"></a>Guidelines</h4><p>Guidelines在布局的横向或者竖向添加网格线，网格线可以是具体的长度或者是宽高的百分比。之后添加控件相对于具体的线位置布局。</p>
<h4 id="自动生成约束"><a href="#自动生成约束" class="headerlink" title="自动生成约束"></a>自动生成约束</h4><p>如果嫌弃手动布局麻烦，再简单的布局情况下，可以手动的拖动，并设置自动生成约束，design -&gt; Autoconnect。</p>
<h4 id="Inference"><a href="#Inference" class="headerlink" title="Inference"></a>Inference</h4><p>Inference也是用于自动添加约束的，但它比Autoconnect的功能要更为强大，因为AutoConnect只能给当前操作的控件自动添加约束，而Inference会给当前界面中的所有元素自动添加约束。因而Inference比较适合用来实现复杂度比较高的界面，它可以一键自动生成所有的约束。摆放完成之后点击一下工具栏上的Infer Constraints按钮，就能为所有控件自动添加约束了</p>
<h4 id="比例间距"><a href="#比例间距" class="headerlink" title="比例间距"></a>比例间距</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">layout_constraintHorizontal_chainStyle</span><br></pre></td></tr></table></figure>
<p>取值：</p>
<ul>
<li>packed</li>
<li><p>spread_inside</p>
</li>
<li><p>spread + 宽度为0，且可以通过weight控制分配比例，首未加间隔</p>
</li>
<li>spread_inside + 宽度非0 首未不加间隔</li>
<li>packed + 宽度非0</li>
</ul>
<p><img src="http://img.blog.csdn.net/20170917222312991?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbG1qNjIzNTY1Nzkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>
<h4 id="浮动按钮"><a href="#浮动按钮" class="headerlink" title="浮动按钮"></a>浮动按钮</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">layout_constraintHorizontal_bias</span><br><span class="line">layout_constraintVertical_bias</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">"com.zhy.constrantlayout_learn.MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"60dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"60dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"#612"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.9"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.9"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">....</span>&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-android 动画view" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/25/android 动画view/" class="article-date">
  	<time datetime="2017-09-24T16:00:00.000Z" itemprop="datePublished">2017-09-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/25/android 动画view/">
        自定义View 动画
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><h4 id="handler回调不断的重绘"><a href="#handler回调不断的重绘" class="headerlink" title="handler回调不断的重绘"></a>handler回调不断的重绘</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomProgressLayer</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> startAngle;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> angle;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> color = Color.parseColor(<span class="string">"#242629"</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DURTATION = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FRAME_NUM = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">private</span> onCompassLayerAnimationEnd compassLayerAnimationEnd;</span><br><span class="line">    <span class="keyword">private</span> RectF oval;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCompassLayerAnimationEnd</span><span class="params">(onCompassLayerAnimationEnd compassLayerAnimationEnd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.compassLayerAnimationEnd = compassLayerAnimationEnd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomProgressLayer</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomProgressLayer</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomProgressLayer</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSizeChanged</span><span class="params">(<span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> oldw, <span class="keyword">int</span> oldh)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onSizeChanged(w, h, oldw, oldh);</span><br><span class="line">        oval = <span class="keyword">new</span> RectF(<span class="number">0</span>, <span class="number">0</span>, getMeasuredWidth(), getMeasuredHeight());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line">        start = System.currentTimeMillis();</span><br><span class="line">        mPaint.setAntiAlias(<span class="keyword">true</span>);<span class="comment">//取消锯齿</span></span><br><span class="line">        mPaint.setStyle(Paint.Style.FILL);</span><br><span class="line">        mPaint.setXfermode(<span class="keyword">null</span>);</span><br><span class="line">        mPaint.setColor(color);</span><br><span class="line">        canvas.saveLayer(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight(), <span class="keyword">null</span>,</span><br><span class="line">                Canvas.MATRIX_SAVE_FLAG | Canvas.CLIP_SAVE_FLAG</span><br><span class="line">                        | Canvas.HAS_ALPHA_LAYER_SAVE_FLAG</span><br><span class="line">                        | Canvas.FULL_COLOR_LAYER_SAVE_FLAG</span><br><span class="line">                        | Canvas.CLIP_TO_LAYER_SAVE_FLAG);</span><br><span class="line">        canvas.drawRect(oval, mPaint);</span><br><span class="line">        <span class="keyword">if</span> (angle != <span class="number">0</span>) &#123;</span><br><span class="line">            mPaint.setXfermode(<span class="keyword">new</span> PorterDuffXfermode(PorterDuff.Mode.DST_OUT));</span><br><span class="line">            canvas.drawArc(oval, startAngle, currentAngle &gt; angle ? angle : currentAngle, <span class="keyword">true</span>, mPaint);</span><br><span class="line">        &#125;</span><br><span class="line">        waitTime = System.currentTimeMillis() - start &gt; <span class="number">16</span> ? <span class="number">0</span> : System.currentTimeMillis() - start;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Handler handler = <span class="keyword">new</span> Handler();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> gapAngle = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> currentAngle = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> waitTime = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> endAngle = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> clockwise = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    Runnable drawRunnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (clockwise) &#123;</span><br><span class="line">                <span class="keyword">if</span> (currentAngle &gt;= angle) &#123;</span><br><span class="line">                    currentAngle = angle;</span><br><span class="line">                    onEnd();</span><br><span class="line">                    invalidate();</span><br><span class="line">                    <span class="comment">//移除当前Runnable</span></span><br><span class="line">                    handler.removeCallbacks(drawRunnable);</span><br><span class="line">                    waitTime = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    currentAngle += gapAngle;</span><br><span class="line">                    handler.postDelayed(drawRunnable, waitTime);</span><br><span class="line">                    invalidate();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (currentAngle &gt;= angle) &#123;</span><br><span class="line">                    currentAngle = angle;</span><br><span class="line">                    startAngle = endAngle;</span><br><span class="line">                    onEnd();</span><br><span class="line">                    invalidate();</span><br><span class="line">                    <span class="comment">//移除当前Runnable</span></span><br><span class="line">                    handler.removeCallbacks(drawRunnable);</span><br><span class="line">                    waitTime = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    startAngle -= gapAngle;</span><br><span class="line">                    currentAngle += gapAngle;</span><br><span class="line">                    currentAngle = currentAngle &gt; angle ? angle : currentAngle;</span><br><span class="line">                    handler.postDelayed(drawRunnable, waitTime);</span><br><span class="line">                    invalidate();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invalidateView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        handler.postDelayed(drawRunnable, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawStatue</span><span class="params">(<span class="keyword">float</span> start, <span class="keyword">float</span> angle, <span class="keyword">int</span> color, <span class="keyword">boolean</span> clockwise)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.startAngle = start - <span class="number">90</span>;</span><br><span class="line">        <span class="keyword">this</span>.angle = angle;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">        <span class="keyword">this</span>.gapAngle = <span class="keyword">this</span>.angle / (<span class="keyword">float</span>) FRAME_NUM;</span><br><span class="line">        BigDecimal b = <span class="keyword">new</span> BigDecimal(<span class="keyword">this</span>.gapAngle);</span><br><span class="line">        <span class="keyword">this</span>.gapAngle = (<span class="keyword">float</span>) b.setScale(<span class="number">2</span>, BigDecimal.ROUND_HALF_UP).doubleValue();</span><br><span class="line">        currentAngle = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.clockwise = clockwise;</span><br><span class="line">        <span class="keyword">if</span> (!clockwise) &#123;</span><br><span class="line">            <span class="keyword">this</span>.endAngle = start - <span class="number">90</span>;</span><br><span class="line">            <span class="keyword">this</span>.startAngle = startAngle + angle;</span><br><span class="line">        &#125;</span><br><span class="line">        invalidateView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">onCompassLayerAnimationEnd</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onEnd</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onEnd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (compassLayerAnimationEnd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            compassLayerAnimationEnd.onEnd();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-电量分析" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/09/01/电量分析/" class="article-date">
  	<time datetime="2017-08-31T16:00:00.000Z" itemprop="datePublished">2017-09-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/01/电量分析/">
        电量分析
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h3><h4 id="go"><a href="#go" class="headerlink" title="go"></a>go</h4><p><a href="http://golang.org/doc/install" target="_blank" rel="noopener">GO安装</a></p>
<p>验证</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go version</span><br><span class="line">go version go1.9 darwin/amd64</span><br></pre></td></tr></table></figure>
<p>环境变量配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/usr/local/go/bin</span><br><span class="line">export GOROOT=$HOME/Myworkspace</span><br><span class="line">export PATH=$PATH:$GOROOT/bin</span><br></pre></td></tr></table></figure>
<h4 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h4><h4 id="python-2-7"><a href="#python-2-7" class="headerlink" title="python 2.7"></a>python 2.7</h4><h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><h4 id="Battery-Historian"><a href="#Battery-Historian" class="headerlink" title="Battery Historian"></a>Battery Historian</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">go get -d -u github.com/google/battery-historian/...</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/google/battery-historian</span><br><span class="line"></span><br><span class="line"><span class="comment"># Compile Javascript files using the Closure compiler</span></span><br><span class="line">$ go run setup.go</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run Historian on your machine (make sure $PATH contains $GOBIN)</span></span><br><span class="line">$ go run cmd/battery-historian/battery-historian.go [--port &lt;default:9999&gt;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Compile Javascript如果提示下载失败，请翻墙，或者按照提示手动下载，并将zip包放到指定位置，并解压，再次执行对应命令</li>
</ul>
<h3 id="生成分析文件"><a href="#生成分析文件" class="headerlink" title="生成分析文件"></a>生成分析文件</h3><p>清除缓存数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell dumpsys batterystats --reset</span><br></pre></td></tr></table></figure>
<p>android 默认不可以查看多次结果中每一次的具体信息，需要手动打开</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell dumpsys batterystats --<span class="built_in">enable</span> full-wake-history</span><br></pre></td></tr></table></figure>
<p>android 7.0以上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adb bugreport bugreport.zip</span><br></pre></td></tr></table></figure>
<p>5.0-6.0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adb bugreport &gt; bugreport.txt</span><br></pre></td></tr></table></figure>
<ul>
<li>当我们跑的是7.0以下的时候，可能会提示7.0以上的命令问题，需要对应的adb版本支持。</li>
</ul>
<h3 id="分析文件"><a href="#分析文件" class="headerlink" title="分析文件"></a>分析文件</h3><p>在google浏览器中打开<a href="http://localhost:port" target="_blank" rel="noopener">http://localhost:port</a></p>
<p><img src="http://oc4zuck5v.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-01%20%E4%B8%8B%E5%8D%882.43.27.png" alt=""></p>
<p>分析结果如下：</p>
<p><img src="http://oc4zuck5v.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-09-01%20%E4%B8%8B%E5%8D%882.45.54.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Android 组件化-生命周期" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/30/Android 组件化-生命周期/" class="article-date">
  	<time datetime="2017-08-29T16:00:00.000Z" itemprop="datePublished">2017-08-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/30/Android 组件化-生命周期/">
        Android 组件化-生命周期
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Lifecycle"><a href="#Lifecycle" class="headerlink" title="Lifecycle"></a>Lifecycle</h3><p>Lifecycle是一个持有某组件生命周期状态的类，并允许其他对象观察这一状态。</p>
<p>Lifecycle使用两个枚举类型来跟踪相关联组件的生命周期状态。</p>
<ul>
<li>Event（事件）:生命周期事件由框架和Lifecycle类分发。这些事件映射到Activity和Fragment的回调。</li>
<li>State（状态）：由Lifecycle对象所跟踪组件的当前状态。</li>
</ul>
<p><img src="https://developer.android.com/images/topic/libraries/architecture/lifecycle-states.png" alt="tupian"></p>
<h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><h4 id="打开项目的build添加："><a href="#打开项目的build添加：" class="headerlink" title="打开项目的build添加："></a>打开项目的build添加：</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">        maven &#123; url 'https://maven.google.com' &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="app-build"><a href="#app-build" class="headerlink" title="app build"></a>app build</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">compile "android.arch.lifecycle:runtime:1.0.0-alpha9"</span><br><span class="line">compile "android.arch.lifecycle:extensions:1.0.0-alpha9"</span><br><span class="line">annotationProcessor "android.arch.lifecycle:compiler:1.0.0-alpha9"</span><br></pre></td></tr></table></figure>
<ul>
<li>注意还只是测试版本，不太稳定，请慎重使用。</li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>一个可以显示组件生命周期状态的类通过添加注解到其方法中来实现：</p>
<p>aLifecycleOwner是一个实现LifecycleOwner接口的activity或者fragment。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyObserver</span> <span class="keyword">implements</span> <span class="title">LifecycleObserver</span> </span>&#123;</span><br><span class="line">    <span class="meta">@OnLifecycleEvent</span>(Lifecycle.Event.ON_RESUME)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnLifecycleEvent</span>(Lifecycle.Event.ON_PAUSE)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">aLifecycleOwner.getLifecycle().addObserver(<span class="keyword">new</span> MyObserver());</span><br></pre></td></tr></table></figure>
<p>由于架构组件当前处在非正式版中，我们无法从一个稳定的组件中添加一个不稳定的API，因此Fragment和AppCompatActivity类暂时无法实现这些接口。目前可以使用LifecycleActivity和LifecycleFragment，当Lifecycles稳定以后，Fragment和AppCompatActivity将实现LifecycleOwner；LifecycleActivity和LifecycleFragment将会被弃用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> <span class="keyword">implements</span> <span class="title">LifecycleRegistryOwner</span> </span>&#123;</span><br><span class="line">    LifecycleRegistry lifecycleRegistry = <span class="keyword">new</span> LifecycleRegistry(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LifecycleRegistry <span class="title">getLifecycle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> lifecycleRegistry;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-多线程数据锁" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/25/多线程数据锁/" class="article-date">
  	<time datetime="2017-08-24T16:00:00.000Z" itemprop="datePublished">2017-08-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/25/多线程数据锁/">
        多线程数据锁
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>关于多线程数据的安全问题，解决方法是synchronized关键字，但是其实synchronized的用法不对可能不一定起到数据锁的效果。</p>
<h3 id="synchronized原理"><a href="#synchronized原理" class="headerlink" title="synchronized原理"></a>synchronized原理</h3><p>每个锁对象都有两个队列，一个是就绪队列，一个是阻塞队列，就绪队列存储了将要获得锁的线程，阻塞队列存储了被阻塞的线程，当一个被线程被唤醒 (notify)后，才会进入到就绪队列，等待cpu的调度。</p>
<ul>
<li>1 获得同步锁</li>
<li>2 清空工作内存</li>
<li>3 从主存拷贝变量副本到工作内存</li>
<li>4 对这些变量计算</li>
<li>5 将变量从工作内存写回到主存</li>
<li>6 释放锁</li>
</ul>
<h3 id="synchronized-同步方法"><a href="#synchronized-同步方法" class="headerlink" title="synchronized 同步方法"></a>synchronized 同步方法</h3><p>像下面这样实现的数据锁其实是不完整的数据锁，因为它只对Account的同一个对象起作用，account1，account2之间就没有互斥性。</p>
<p>原因：synchronized关键字可以作为函数的修饰符，也可作为函数内的语句，也就是平时说的同步方法和同步语句块。如果再细的分类，synchronized可作用于instance变量、object reference（对象引用）、static函数和class literals(类名称字面常量)身上。而当修饰方法时，锁的其实是当前对象的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> balance;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(<span class="keyword">int</span> balance)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.balance = balance;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBalance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> balance;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">            balance = balance + num;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">            balance = balance - num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="synchronized-同步代码块"><a href="#synchronized-同步代码块" class="headerlink" title="synchronized 同步代码块"></a>synchronized 同步代码块</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//注：零长度的byte数组对象创建起来将比任何对象都经济――查看编译后的字节码：</span></span><br><span class="line">        <span class="comment">// 生成零长度的byte[]对象只需3条操作码，而Object lock = new Object()则需要7行操作码。</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">byte</span>[] lock = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>]; <span class="comment">// 特殊的instance变量</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> balance;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(<span class="keyword">int</span> balance)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.balance = balance;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBalance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> balance;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                balance = balance + num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                balance = balance - num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="将synchronized作用于static-函数"><a href="#将synchronized作用于static-函数" class="headerlink" title="将synchronized作用于static 函数"></a>将synchronized作用于static 函数</h3><p>类方法，适用用所有对象。</p>
<h3 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h3><p>用volatile修饰的变量，线程在每次使用变量的时候，都会读取变量修改后的最的值。volatile很容易被误用，用来进行原子性操作。</p>
<p>可见性，是指线程之间的可见性，一个线程修改的状态对另一个线程是可见的。</p>
<p>保证了不同线程对这个变量进行操作时的可见性，即一个线程修改了某个变量的值，这新值对其他线程来说是立即可见的。</p>
<p>可见性只能保证每次读取的是最新的值，但是volatile没办法保证对变量的操作的原子性。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-MAT" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/25/MAT/" class="article-date">
  	<time datetime="2017-08-24T16:00:00.000Z" itemprop="datePublished">2017-08-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/25/MAT/">
        内存检查MAT
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://www.eclipse.org/mat/" target="_blank" rel="noopener">下载</a></p>
<h3 id="mac-打不开问题"><a href="#mac-打不开问题" class="headerlink" title="mac 打不开问题"></a>mac 打不开问题</h3><p>mat -&gt; Contents -&gt; Eclipse -&gt; MemoryAnalyzer.ini</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-startup</span><br><span class="line">../Eclipse/plugins/org.eclipse.equinox.launcher_1.3.100.v20150511-1540.jar</span><br><span class="line">####添加行</span><br><span class="line">-data</span><br><span class="line">/Users/Diablo/log</span><br><span class="line">####</span><br><span class="line">--launcher.library</span><br><span class="line">../Eclipse/plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.300.v20150602-1417</span><br><span class="line">-vmargs</span><br><span class="line">-Xmx1024m</span><br><span class="line">-Dorg.eclipse.swt.internal.carbon.smallFonts</span><br><span class="line">-XstartOnFirstThread</span><br></pre></td></tr></table></figure>
<h3 id="AS-生成-hprof文件"><a href="#AS-生成-hprof文件" class="headerlink" title="AS 生成 .hprof文件"></a>AS 生成 .hprof文件</h3><p>AS -&gt; DDMS -&gt; 点击Update Heap按钮(装有一半绿色液体的圆柱体）开始进行追踪 -&gt; 点击Dump HPROP File按钮结束追踪，生成并保存hprof文件 </p>
<h3 id="将AS生成的-hprof文件转换格式"><a href="#将AS生成的-hprof文件转换格式" class="headerlink" title="将AS生成的.hprof文件转换格式"></a>将AS生成的.hprof文件转换格式</h3><p>cd到sdk目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hprof-conv /Users/Diablo/Desktop/ 1.hprof 2.hprof</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-double精度计算" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/08/08/double精度计算/" class="article-date">
  	<time datetime="2017-08-07T16:00:00.000Z" itemprop="datePublished">2017-08-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/08/double精度计算/">
        Double 精度计算
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>当开发一些金融产品时，总会涉及到一些数据的比较，以及数据是否是某个单位的倍数的判断，但是在实际操作中你会看到，浮点数并不是绝对的数值，是会丢精度的。</p>
<h3 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">BigDecimal aDouble =<span class="keyword">new</span> BigDecimal(<span class="number">1.22</span>);</span><br><span class="line">System.out.println(<span class="string">"construct with a double value: "</span> + aDouble);</span><br><span class="line">BigDecimal aString = <span class="keyword">new</span> BigDecimal(<span class="string">"1.22"</span>);</span><br><span class="line">System.out.println(<span class="string">"construct with a String value: "</span> + aString);</span><br><span class="line"></span><br><span class="line">输出结果如下：</span><br><span class="line">construct with a <span class="keyword">double</span></span><br><span class="line">value:<span class="number">1.2199999999999999733546474089962430298328399658203125</span></span><br><span class="line">construct with a aString value:<span class="number">1.22</span></span><br></pre></td></tr></table></figure>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>因为java的精度是小数点后18位的，而小数部分是需要转化为二进制形式的，而某些小数如0.22在转化为二进制的时候会出现除不尽的情况。</p>
<h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><p>其实解决方法也是很简单，虽然并不是精确的结果，但是相差甚微，我们只需要四舍五入保留我们需要的小数点位数即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getExactValue</span><span class="params">(<span class="keyword">double</span> value, <span class="keyword">int</span> digits)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(BigDecimalUtil.format(value, digits)).doubleValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//results 0商，1余数    </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">divideAndRemainder</span><span class="params">(<span class="keyword">double</span> v1, <span class="keyword">double</span> v2, <span class="keyword">int</span> digits)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (digits == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> v1 * <span class="number">10</span> % <span class="number">10</span> == <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        BigDecimal b1 = <span class="keyword">new</span> BigDecimal(BigDecimalUtil.format(v1, digits));</span><br><span class="line">        BigDecimal b2 = <span class="keyword">new</span> BigDecimal(BigDecimalUtil.format(v2, digits));</span><br><span class="line">        BigDecimal[] results = b1.divideAndRemainder(b2);</span><br><span class="line">        <span class="keyword">return</span> results[<span class="number">1</span>].doubleValue() == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>使用BigDecimal进行转换是一件很费时的事，所以注意使用的场景，不要过度使用导致性能问题。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2018 ShenYonghe
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>