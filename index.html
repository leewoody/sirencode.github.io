<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Diablo</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Diablo">
<meta property="og:url" content="https://github.com/sirencode/index.html">
<meta property="og:site_name" content="Diablo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Diablo">
  
    <link rel="alternative" href="/atom.xml" title="Diablo" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">ShenYonghe</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">ShenYonghe</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">ShenYonghe</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Android 投屏" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/07/13/Android 投屏/" class="article-date">
  	<time datetime="2018-07-12T16:00:00.000Z" itemprop="datePublished">2018-07-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/13/Android 投屏/">
        Android 投屏
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android-投屏"><a href="#Android-投屏" class="headerlink" title="Android 投屏"></a>Android 投屏</h1><h2 id="Vysor"><a href="#Vysor" class="headerlink" title="Vysor"></a>Vysor</h2><p><a href="https://chrome.google.com/webstore/detail/vysorcom/kdphpklacmlhmooodiekhpbepcdlaghl?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">vysor</a></p>
<p>可以通过修改配置文件的形式进行破解，但是破解后投放的影像还是有些模糊，且在一些UI细节上面存在一些瑕疵，比如有些线显示不出来。</p>
<h2 id="Scrcpy"><a href="#Scrcpy" class="headerlink" title="Scrcpy"></a>Scrcpy</h2><p>Scrcpy本身就是免费的，且默认传输速率为8M，最高支持32M,画面相对来说非常清晰。</p>
<h3 id="安装Scrcpy"><a href="#安装Scrcpy" class="headerlink" title="安装Scrcpy"></a>安装Scrcpy</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ brew install scrcpy</span><br><span class="line"><span class="comment"># adb</span></span><br><span class="line">$ brew cask install android-platform-tools</span><br></pre></td></tr></table></figure>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li>启动-scrcpy</li>
<li>scrcpy –help ：Scrcpy 内建的帮助模式，里面也列举了 Scrcpy 的所有的附加命令。</li>
<li>scrcpy -b Xm ：强制提升/下降 Scrcpy 的传输速率，默认速率为 8Mbps，“X” 的值小于 8 表示限制速率，大于 8 表示强制提高传输速率，速率越高代表传输的质量越高。</li>
</ul>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul>
<li>部分手机需要在开发者选项里面打开允许「模拟位置点击」</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Android 模块化 " class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/07/06/Android 模块化 /" class="article-date">
  	<time datetime="2018-07-05T16:00:00.000Z" itemprop="datePublished">2018-07-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/06/Android 模块化 /">
        Android 模块化
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android-模块化"><a href="#Android-模块化" class="headerlink" title="Android 模块化"></a>Android 模块化</h1><p>背景，当我们的项目的业务随着时间的推移越来越多越来越复杂，有时候只是想测试一下或者修改一下相对简单的功能，也需要等待相对漫长的编译时间，以及各种跳转依赖的处理。为了使相对独立的模块相对快速的开发，我们决定事实模块化，可以单独打包对应的模块。</p>
<h2 id="整体的思路"><a href="#整体的思路" class="headerlink" title="整体的思路"></a>整体的思路</h2><p>主项目全量打包，包含所有的功能以及连贯的前后业务逻辑。实现模块化后的独立模块可以实现单独打包开发对应的功能。</p>
<h2 id="模块化的流程"><a href="#模块化的流程" class="headerlink" title="模块化的流程"></a>模块化的流程</h2><p>首先模块化的目的确定了，在模块化的过程中的原则就是尽量不要修改主项目的代码。首先将模块的代码从主项目中抽离出来，并进行全功能测试以及主项目的集成测试，最后删除主项目中移除的对应的代码。</p>
<h3 id="第一步新建独立模块的app引导"><a href="#第一步新建独立模块的app引导" class="headerlink" title="第一步新建独立模块的app引导"></a>第一步新建独立模块的app引导</h3><p>MyModuleAPP模块：我的模块的引导程序。</p>
<p>new- &gt;android lib -&gt; build配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if(myAsApp.toBoolean()) &#123;</span><br><span class="line">    apply plugin: 'com.android.application'</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    apply plugin: 'com.android.library'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>设置全局的myAsApp变量控制MyModuleAPP是作为lib还是app编译：</p>
<p>gradle.properties:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myAsApp=true</span><br></pre></td></tr></table></figure>
<h3 id="将主项目中的所有“MY”相关的代码抽离到独立的模块NMyModule"><a href="#将主项目中的所有“MY”相关的代码抽离到独立的模块NMyModule" class="headerlink" title="将主项目中的所有“MY”相关的代码抽离到独立的模块NMyModule"></a>将主项目中的所有“MY”相关的代码抽离到独立的模块NMyModule</h3><p>注意：</p>
<ul>
<li>1 在抽离相关代码的时候记得重命名抽离的资源文件，防止主项目依赖的时候资源冲突。</li>
<li>2 尽量少使用butterknife,因为在lib依赖的时候会有很多bug。</li>
<li>3 当将代码从app抽离出到lib，资源会从常量变为变量。</li>
</ul>
<h3 id="公共代码抽离"><a href="#公共代码抽离" class="headerlink" title="公共代码抽离"></a>公共代码抽离</h3><ul>
<li>1 登录相关的代码抽离出来供所有独立模块使用。</li>
<li>2 api相关抽离。</li>
<li>3 公共库依赖。</li>
</ul>
<h3 id="数据同步"><a href="#数据同步" class="headerlink" title="数据同步"></a>数据同步</h3><ul>
<li>1 配置文件放到公共库。</li>
<li>2 lib访问app数据的时候时候使用<a href="https://sirencode.github.io/2018/02/26/%E5%AD%90%E6%A8%A1%E5%9D%97%E8%AE%BF%E9%97%AEapp%E6%A8%A1%E5%9D%97/" target="_blank" rel="noopener">bridge</a></li>
<li>3 lib跳转app使用apt路由ARouter。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-dir505 科学上网" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/16/dir505 科学上网/" class="article-date">
  	<time datetime="2018-06-15T16:00:00.000Z" itemprop="datePublished">2018-06-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/16/dir505 科学上网/">
        dir505 科学上网
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="dir505-科学上网"><a href="#dir505-科学上网" class="headerlink" title="dir505 科学上网"></a>dir505 科学上网</h1><h2 id="dir505-升级国际版固件"><a href="#dir505-升级国际版固件" class="headerlink" title="dir505 升级国际版固件"></a>dir505 升级国际版固件</h2><p><a href="http://support.dlink.com.au/download/download.aspx?product=DIR-505" target="_blank" rel="noopener">国际版固件地址</a></p>
<p>利用16进制编辑器将‘DEF’替换为‘CN’,之后通过路由器的固件升级升级固件。</p>
<h2 id="刷openwrt"><a href="#刷openwrt" class="headerlink" title="刷openwrt"></a>刷openwrt</h2><p><a href="https://archive.openwrt.org/releases/" target="_blank" rel="noopener">openwrt</a> 之后找到dir-505的固件下载(包含factory的那个),通过固件升级的方式刷。</p>
<h2 id="配置openwrt"><a href="#配置openwrt" class="headerlink" title="配置openwrt"></a>配置openwrt</h2><ul>
<li><p>注意安装完openwrt在WiFi中将找不到对应的路由信号，这是因为openwrt默认没有开启无线功能，这时候不要慌，网线连接电脑进行配置即可。</p>
</li>
<li><p>1 首先向电脑的本地网卡设置为固定ip:192.168.1.x,子网掩码：255.255.0.0</p>
</li>
<li>2 telnet 192.168.1.1</li>
<li>3 设置root密码</li>
<li>4 mac ssh win putty 192.168.1.1</li>
</ul>
<h3 id="开启wifi"><a href="#开启wifi" class="headerlink" title="开启wifi"></a>开启wifi</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uci set wireless.@wifi-device[0].disabled=0</span><br><span class="line">uci set wireless.@wifi-iface[0].ssid='wifiname'</span><br><span class="line">uci set wireless.@wifi-iface[0].encryption='psk2'</span><br><span class="line">uci set wireless.@wifi-iface[0].key='password'</span><br><span class="line">uci commit wireless</span><br></pre></td></tr></table></figure>
<h3 id="设置时区"><a href="#设置时区" class="headerlink" title="设置时区"></a>设置时区</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uci set system.@system[0].zonename='Asia/Shanghai'</span><br><span class="line">uci set system.@system[0].timezone='CST-8'</span><br><span class="line">uci commit system</span><br></pre></td></tr></table></figure>
<h3 id="中继路由设置"><a href="#中继路由设置" class="headerlink" title="中继路由设置"></a>中继路由设置</h3><p>如果你需要将你的路由作为二级路由使用请设置中继192.168.0.x，因为192.168.1.1已经被一级路由占用。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">uci delete network.lan.ifname</span><br><span class="line">uci delete network.lan.type</span><br><span class="line">uci add network interface</span><br><span class="line">uci rename network.@interface[-1]='wan'</span><br><span class="line">uci set network.@interface[-1].ifname='eth1'</span><br><span class="line">uci set network.wan.proto=static</span><br><span class="line">uci set network.wan.ipaddr=192.168.1.123</span><br><span class="line">uci set network.wan.netmask=255.255.255.0</span><br><span class="line">uci set network.wan.gateway=192.168.1.1</span><br><span class="line">uci set network.wan.dns='114.114.114.114 114.114.115.115'</span><br><span class="line">uci set network.lan.ipaddr=192.168.0.1</span><br><span class="line">uci set network.lan.dns='114.114.114.114 114.114.115.115'</span><br><span class="line">uci commit network</span><br></pre></td></tr></table></figure>
<h3 id="重启network"><a href="#重启network" class="headerlink" title="重启network"></a>重启network</h3><p>/etc/init.d/network restart</p>
<h2 id="安装ss"><a href="#安装ss" class="headerlink" title="安装ss"></a>安装ss</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">//中文后台</span><br><span class="line">opkg install install luci-i18n-base-zh-cn</span><br><span class="line">opkg install luci-app-shadowsocks-libev</span><br><span class="line">opkg install luci-i18n-shadowsocks-libev-zh-cn</span><br><span class="line">opkg install shadowsocks-libev</span><br></pre></td></tr></table></figure>
<p>注意安装顺序：最后安装shadowsocks-libev,安装完这个就默认设置一个本地代理导致网络无法访问了。</p>
<h2 id="刷成砖恢复"><a href="#刷成砖恢复" class="headerlink" title="刷成砖恢复"></a>刷成砖恢复</h2><p>dir-505号称刷不坏的神机：</p>
<p>恢复模式设置：</p>
<ul>
<li>1 将电脑的本地网卡设置为固定IP：192.168.0.x 子网掩码:255.255.0.0</li>
<li>2 断电情况按住路由的reset之后通电等到红灯闪烁松开reset</li>
<li>3 电脑打开192.168.1.1便可上传固件了</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Android 输入系统" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/11/Android 输入系统/" class="article-date">
  	<time datetime="2018-06-10T16:00:00.000Z" itemprop="datePublished">2018-06-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/11/Android 输入系统/">
        Android 输入系统
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android-输入系统"><a href="#Android-输入系统" class="headerlink" title="Android 输入系统"></a>Android 输入系统</h1><h2 id="输入系统的框架"><a href="#输入系统的框架" class="headerlink" title="输入系统的框架"></a>输入系统的框架</h2><p><img src="http://oc4zuck5v.bkt.clouddn.com/android_input.png" alt=""></p>
<ul>
<li>Linux内核-接受输入设备的中断，并将原始事件的数据写入设备节点中。</li>
<li>设备节点，作为内核与IMS的桥梁，它将原始事件的数据暴露给用户空间，以便IMS可以从中读取事件。</li>
<li>IMS,一个Android系统服务，它分为Java层和native层两部分。java层负责与WMS通信，而native层则是InputReader和InputDispatcher两个输入系统关键组件的运行容器。</li>
<li>EventHub,直接访问所有设备节点。通过getEvents()的函数将所有输入系统相关的待处理的底层事件返回给使用者。包括设备节点的增删。</li>
<li>InputReader，它运行于一个独立的线程中，负责管理输入设备的列表于配置，以及进行输入事件的加工处理。它通过其他线程循环不断地通过getEvents函数从EventHub中将事件取出并进行处理。对于设备节点的增删事件，它会更新输入设备列表与配置。对于原始输入事件，InputReader对其进行翻译，组装，封装为包含更多信息，更具可读性的输入事件，然后交给InputDispatcher进行派发。</li>
<li>InputReaderPolicy,它为InputReader的事件加工处理提供一些策略配置，例如键盘布局信息等。</li>
<li>InputDispatcher，它运行于独立线程中，InputDispatcher中保管了来自WMS的所有窗口的信息，其收到来自InputReader的输入事件后，会在其保管的窗口中寻找合适的窗口，并将事件派发给他们。</li>
<li>InputDispatcherPolicy，它为InputDispatcher的派发过程提供策略控制。例如截取某些特定的输入事件用作特殊用途，或者阻止将某些事件派发给目标窗口。一个典型的例子就是Home键被InputDispatcherPolicy截取到PhoneWindowManager中进行处理，并阻止窗口收到Home键的事件。</li>
<li>WMS, 当新建窗口时，WMS为新窗口和IMS创建了事件传递所用的通道。另外WMS还将所有窗口的信息，包括窗口的可点击区域，焦点窗口等信息，实时的更新到IMS的InputDispatcher中，使得InputDispatcher可以正确地将事件派发到指定窗口。</li>
<li>ViewRootImpl，对某些窗口，如壁纸窗口，surfaceview窗口来说，窗口就是输入事件派发的终点。而对其他activity，对话框等使用了Android控件系统的窗口来说，输入事件的终点是view。ViewRootImpl将窗口所接收的输入事件沿着控件数将事件派发给感兴趣的控件。</li>
</ul>
<h3 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h3><p>输入设备和输入事件</p>
<p>输入设备：触摸屏，键盘以及外接设备。当输入设备可用的时，Linux就会在/dev/input/ 下创建对应的名为event0~n，当输入设备不可用时，则会将对应的节点删除。用户空间可以通过ioctl的方式从这些设备节点中获取其对应的输入涉笔的类型，厂商，描述等信息。</p>
<h4 id="getevent-与-sendevent"><a href="#getevent-与-sendevent" class="headerlink" title="getevent 与 sendevent"></a>getevent 与 sendevent</h4><p>Android 系统提供了getevent和setevent两个工具共开发者从设备节点中直接读取输入事件或写入事件。</p>
<p>原始事件的四项基本元素：</p>
<ul>
<li>时间戳</li>
<li>类型</li>
<li>代码</li>
<li>值</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell getevent[-选项] [device_path]</span><br><span class="line">$ adb shell sendevent &lt;节点路径&gt; &lt;类型&gt; &lt;代码&gt; &lt;值&gt;</span><br></pre></td></tr></table></figure>
<h4 id="模拟输入事件"><a href="#模拟输入事件" class="headerlink" title="模拟输入事件"></a>模拟输入事件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell input keyevent XX</span><br></pre></td></tr></table></figure>
<pre><code>•    0 --&gt;  &quot;KEYCODE_UNKNOWN&quot;
•    1 --&gt;  &quot;KEYCODE_MENU&quot;
•    2 --&gt;  &quot;KEYCODE_SOFT_RIGHT&quot;
•    3 --&gt;  &quot;KEYCODE_HOME&quot;
•    4 --&gt;  &quot;KEYCODE_BACK&quot;
•    5 --&gt;  &quot;KEYCODE_CALL&quot;
•    6 --&gt;  &quot;KEYCODE_ENDCALL&quot;
•    7 --&gt;  &quot;KEYCODE_0&quot;
•    8 --&gt;  &quot;KEYCODE_1&quot;
•    9 --&gt;  &quot;KEYCODE_2&quot;
•    10 --&gt;  &quot;KEYCODE_3&quot;
•    11 --&gt;  &quot;KEYCODE_4&quot;
•    12 --&gt;  &quot;KEYCODE_5&quot;
•    13 --&gt;  &quot;KEYCODE_6&quot;
•    14 --&gt;  &quot;KEYCODE_7&quot;
•    15 --&gt;  &quot;KEYCODE_8&quot;
•    16 --&gt;  &quot;KEYCODE_9&quot;
•    17 --&gt;  &quot;KEYCODE_STAR&quot;
•    18 --&gt;  &quot;KEYCODE_POUND&quot;
•    19 --&gt;  &quot;KEYCODE_DPAD_UP&quot;
•    20 --&gt;  &quot;KEYCODE_DPAD_DOWN&quot;
•    21 --&gt;  &quot;KEYCODE_DPAD_LEFT&quot;
•    22 --&gt;  &quot;KEYCODE_DPAD_RIGHT&quot;
•    23 --&gt;  &quot;KEYCODE_DPAD_CENTER&quot;
•    24 --&gt;  &quot;KEYCODE_VOLUME_UP&quot;
•    25 --&gt;  &quot;KEYCODE_VOLUME_DOWN&quot;
•    26 --&gt;  &quot;KEYCODE_POWER&quot;
•    27 --&gt;  &quot;KEYCODE_CAMERA&quot;
•    28 --&gt;  &quot;KEYCODE_CLEAR&quot;
•    29 --&gt;  &quot;KEYCODE_A&quot;
•    30 --&gt;  &quot;KEYCODE_B&quot;
•    31 --&gt;  &quot;KEYCODE_C&quot;
•    32 --&gt;  &quot;KEYCODE_D&quot;
•    33 --&gt;  &quot;KEYCODE_E&quot;
•    34 --&gt;  &quot;KEYCODE_F&quot;
•    35 --&gt;  &quot;KEYCODE_G&quot;
•    36 --&gt;  &quot;KEYCODE_H&quot;
•    37 --&gt;  &quot;KEYCODE_I&quot;
•    38 --&gt;  &quot;KEYCODE_J&quot;
•    39 --&gt;  &quot;KEYCODE_K&quot;
•    40 --&gt;  &quot;KEYCODE_L&quot;
•    41 --&gt;  &quot;KEYCODE_M&quot;
•    42 --&gt;  &quot;KEYCODE_N&quot;
•    43 --&gt;  &quot;KEYCODE_O&quot;
•    44 --&gt;  &quot;KEYCODE_P&quot;
•    45 --&gt;  &quot;KEYCODE_Q&quot;
•    46 --&gt;  &quot;KEYCODE_R&quot;
•    47 --&gt;  &quot;KEYCODE_S&quot;
•    48 --&gt;  &quot;KEYCODE_T&quot;
•    49 --&gt;  &quot;KEYCODE_U&quot;
•    50 --&gt;  &quot;KEYCODE_V&quot;
•    51 --&gt;  &quot;KEYCODE_W&quot;
•    52 --&gt;  &quot;KEYCODE_X&quot;
•    53 --&gt;  &quot;KEYCODE_Y&quot;
•    54 --&gt;  &quot;KEYCODE_Z&quot;
•    55 --&gt;  &quot;KEYCODE_COMMA&quot;
•    56 --&gt;  &quot;KEYCODE_PERIOD&quot;
•    57 --&gt;  &quot;KEYCODE_ALT_LEFT&quot;
•    58 --&gt;  &quot;KEYCODE_ALT_RIGHT&quot;
•    59 --&gt;  &quot;KEYCODE_SHIFT_LEFT&quot;
•    60 --&gt;  &quot;KEYCODE_SHIFT_RIGHT&quot;
•    61 --&gt;  &quot;KEYCODE_TAB&quot;
•    62 --&gt;  &quot;KEYCODE_SPACE&quot;
•    63 --&gt;  &quot;KEYCODE_SYM&quot;
•    64 --&gt;  &quot;KEYCODE_EXPLORER&quot;
•    65 --&gt;  &quot;KEYCODE_ENVELOPE&quot;
•    66 --&gt;  &quot;KEYCODE_ENTER&quot;
•    67 --&gt;  &quot;KEYCODE_DEL&quot;
•    68 --&gt;  &quot;KEYCODE_GRAVE&quot;
•    69 --&gt;  &quot;KEYCODE_MINUS&quot;
•    70 --&gt;  &quot;KEYCODE_EQUALS&quot;
•    71 --&gt;  &quot;KEYCODE_LEFT_BRACKET&quot;
•    72 --&gt;  &quot;KEYCODE_RIGHT_BRACKET&quot;
•    73 --&gt;  &quot;KEYCODE_BACKSLASH&quot;
•    74 --&gt;  &quot;KEYCODE_SEMICOLON&quot;
•    75 --&gt;  &quot;KEYCODE_APOSTROPHE&quot;
•    76 --&gt;  &quot;KEYCODE_SLASH&quot;
•    77 --&gt;  &quot;KEYCODE_AT&quot;
•    78 --&gt;  &quot;KEYCODE_NUM&quot;
•    79 --&gt;  &quot;KEYCODE_HEADSETHOOK&quot;
•    80 --&gt;  &quot;KEYCODE_FOCUS&quot;
•    81 --&gt;  &quot;KEYCODE_PLUS&quot;
•    82 --&gt;  &quot;KEYCODE_MENU&quot;
•    83 --&gt;  &quot;KEYCODE_NOTIFICATION&quot;
•    84 --&gt;  &quot;KEYCODE_SEARCH&quot;
•    85 --&gt;  &quot;TAG_LAST_KEYCODE&quot;
</code></pre><h2 id="Android输入系统的工作原理"><a href="#Android输入系统的工作原理" class="headerlink" title="Android输入系统的工作原理"></a>Android输入系统的工作原理</h2><p>就是监控/dev/input/下所有设备节点，当某个节点有数据可读时，将数据读出并进行一系列的翻译加工，然后在所有的窗口中寻找合适的事件接受者，并派发给它。</p>
<h2 id="INotify-与-Epoll"><a href="#INotify-与-Epoll" class="headerlink" title="INotify 与 Epoll"></a>INotify 与 Epoll</h2><h3 id="INotify"><a href="#INotify" class="headerlink" title="INotify"></a>INotify</h3><p>INotify是linux提供的一种文件系统变化通知机制。INotify机制有两个对象，分别为inotif对象和watch对象。watch监听文件的删除创建读写等，inotify对象是通过主动轮询读取的。</p>
<h3 id="Epoll"><a href="#Epoll" class="headerlink" title="Epoll"></a>Epoll</h3><p>Epoll可以使用一次等待监听多个描述符的可读/可写状态。等待返回时携带了可读的描述符或自定义的数据，使用者据此读取所需的数据后可以再次进入等待。因此不需要为每个描述符创建独立的线程进行阻塞读取，避免了资源浪费同时获得更快的响应速度。</p>
<p>使用:</p>
<ul>
<li>通过epoll_create()创建一个epoll对象</li>
<li>为需要监听的描述符填充epoll_events结构体,并使用epoll_ctl()注册到epoll对象中。</li>
<li>epoll_wait等待事件发生</li>
<li>epoll_wait返回epoll_events结构体数组判断事件的类型与来源并进行处理。</li>
<li>epoll_wait等待新事件</li>
</ul>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>当有新的设备可用的时候，现在/dev/input下，当input下新增或者删除设备的时候，INotify会通知到EventHub去读取对应的设备信息，并将对应的信息发送给对应的window。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/24/正则表达式/" class="article-date">
  	<time datetime="2018-05-23T16:00:00.000Z" itemprop="datePublished">2018-05-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/24/正则表达式/">
        正则表达式
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="号代表前面的字符必须至少出现一次"><a href="#号代表前面的字符必须至少出现一次" class="headerlink" title="+号代表前面的字符必须至少出现一次"></a>+号代表前面的字符必须至少出现一次</h3><ul>
<li>sh+e = she,shhhe</li>
</ul>
<h3 id="号代表前一个字符可以出现任意次（0次、或1次、或多次）。"><a href="#号代表前一个字符可以出现任意次（0次、或1次、或多次）。" class="headerlink" title="*号代表前一个字符可以出现任意次（0次、或1次、或多次）。"></a>*号代表前一个字符可以出现任意次（0次、或1次、或多次）。</h3><ul>
<li>shh+e = she,shhhe…</li>
</ul>
<h3 id="问号代表前面的字符最多只可以出现一次（0次、或1次）"><a href="#问号代表前面的字符最多只可以出现一次（0次、或1次）" class="headerlink" title="? 问号代表前面的字符最多只可以出现一次（0次、或1次）"></a>? 问号代表前面的字符最多只可以出现一次（0次、或1次）</h3><ul>
<li>shh?e = she,shhe</li>
</ul>
<h3 id="将下一个字符标记为一个特殊字符"><a href="#将下一个字符标记为一个特殊字符" class="headerlink" title="\将下一个字符标记为一个特殊字符"></a>\将下一个字符标记为一个特殊字符</h3><ul>
<li>为了逐字表达，你必须在”^.$()¦*+?{\”这些字符前加上转移字符’\’</li>
</ul>
<h3 id="和-一个字符串的开始和结束"><a href="#和-一个字符串的开始和结束" class="headerlink" title="^和$一个字符串的开始和结束"></a>^和$一个字符串的开始和结束</h3><ul>
<li>^The = There…</li>
<li>$end = the end</li>
<li>^abc$ = abc</li>
</ul>
<h3 id="n"><a href="#n" class="headerlink" title="{n}"></a>{n}</h3><ul>
<li>ab{2}：表示一个字符串有一个a跟着2个b</li>
<li>ab{2,}：表示一个字符串有一个a跟着至少2个b</li>
<li>ab{3,5}：表示一个字符串有一个a跟着3到5个b</li>
</ul>
<h3 id="或"><a href="#或" class="headerlink" title="或 |"></a>或 |</h3><ul>
<li>(b|cd)ef = bef或cdef</li>
</ul>
<h3 id="可以表示任何字符"><a href="#可以表示任何字符" class="headerlink" title=".可以表示任何字符"></a>.可以表示任何字符</h3><ul>
<li>A.=A后面跟着任意一个字符</li>
</ul>
<h3 id="特定字符"><a href="#特定字符" class="headerlink" title="[]特定字符"></a>[]特定字符</h3><p>[a-zA-Z]=任意字母</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Android DataBinding" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/18/Android DataBinding/" class="article-date">
  	<time datetime="2018-05-17T16:00:00.000Z" itemprop="datePublished">2018-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/18/Android DataBinding/">
        Android DataBinding
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android-DataBinding"><a href="#Android-DataBinding" class="headerlink" title="Android DataBinding"></a>Android DataBinding</h1><h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>实现view和data的双向绑定。</p>
<h2 id="好处与不足"><a href="#好处与不足" class="headerlink" title="好处与不足"></a>好处与不足</h2><ul>
<li>减少findviewbyid的繁琐代码</li>
<li>减少setview数据的繁琐代码</li>
<li>包名修改时不能自动修改引用路径</li>
<li>早起版本不问题，问题较多</li>
</ul>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>以XML注入的方式对view和数据进行绑定，并通过set数据时去更新UI的原理，以观察者模式形式实现。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>app/build<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    dataBinding &#123;</span><br><span class="line">        enabled = true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>使用模板：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;layout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;data&gt;</span><br><span class="line">        &lt;!--此处定义该布局要用到的数据的名称及类型--&gt;</span><br><span class="line">    &lt;/data&gt;</span><br><span class="line"></span><br><span class="line">    &lt;跟布局 /&gt;</span><br><span class="line">&lt;/layout&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line">   &lt;data&gt;</span><br><span class="line">       &lt;variable name=&quot;user&quot; type=&quot;com.example.User&quot;/&gt;</span><br><span class="line">   &lt;/data&gt;</span><br><span class="line">   &lt;LinearLayout</span><br><span class="line">       android:orientation=&quot;vertical&quot;</span><br><span class="line">       android:layout_width=&quot;match_parent&quot;</span><br><span class="line">       android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line">       &lt;TextView android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">           android:text=&quot;@&#123;user.firstName&#125;&quot;/&gt;</span><br><span class="line">       &lt;TextView android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">           android:text=&quot;@&#123;user.lastName&#125;&quot;/&gt;</span><br><span class="line">   &lt;/LinearLayout&gt;</span><br><span class="line">&lt;/layout&gt;</span><br></pre></td></tr></table></figure>
<h3 id="1-布局文件处理"><a href="#1-布局文件处理" class="headerlink" title="1 布局文件处理"></a>1 布局文件处理</h3><p>首先，DataBinding会对根元素为<layout>的布局文件进行预处理，使用了binding表达式的view都被设置了Tag，而原有的<layout>标签、data标签以及里面的variable标签，还有各个view中的binding表达式都不见了</layout></layout></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span>     &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span> <span class="attr">android:id</span>=<span class="string">"@+id/firstname"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:tag</span>=<span class="string">"binding_1"</span>  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-生成数据以及view的关系映射文件：activity-main-layout-xml（在build-intermediates-data-binding-info文件夹中）"><a href="#2-生成数据以及view的关系映射文件：activity-main-layout-xml（在build-intermediates-data-binding-info文件夹中）" class="headerlink" title="2 生成数据以及view的关系映射文件：activity_main-layout.xml（在build/intermediates/data-binding-info文件夹中）"></a>2 生成数据以及view的关系映射文件：activity_main-layout.xml（在build/intermediates/data-binding-info文件夹中）</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> standalone=<span class="string">"yes"</span>?&gt;</span><br><span class="line">&lt;Layout layout=<span class="string">"activity_main"</span> </span><br><span class="line">modulePackage=<span class="string">"XXX"</span> &gt;</span><br><span class="line"></span><br><span class="line">&lt;Variables declared=<span class="string">"true"</span> type=<span class="string">"XXX.User"</span> name=<span class="string">"user"</span>&gt;</span><br><span class="line">&lt;/Variables&gt;</span><br><span class="line"></span><br><span class="line">&lt;Targets&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Target tag=<span class="string">"layout/activity_main_0"</span> view=<span class="string">"LinearLayout"</span>&gt;</span><br><span class="line">    &lt;/Target&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Target id=<span class="string">"@+id/firstname"</span> tag=<span class="string">"binding_1"</span> view=<span class="string">"TextView"</span>&gt;      </span><br><span class="line">            &lt;Expression text=<span class="string">"user.firstName"</span> attribute=<span class="string">"android:text"</span>/&gt;</span><br><span class="line">    &lt;/Target&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/Targets&gt;</span><br><span class="line">&lt;/Layout&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-生成activitybinding和BR"><a href="#3-生成activitybinding和BR" class="headerlink" title="3 生成activitybinding和BR"></a>3 生成activitybinding和BR</h3><p>AS会自动识别databinding的view的布局格式并产生成对应的activitybinding(该对象持有Activity要展示的数据和布局中的各个view的引用)对象和BR(BR文件是一个对应modle属性的Map表)对象。binding对象记录对应的data数据以及data和view的绑定关系。</p>
<h3 id="实时更新设置"><a href="#实时更新设置" class="headerlink" title="实时更新设置"></a>实时更新设置</h3><p>以上实现了数据的binding，但是不会实时刷新，要实现实时刷新需要对数据进行监听：<br>无论哪种模式，最终的目的都是当数据变化时，对应的ActivityDataBinding对象回去动态更新对应view的数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> ObservableField&lt;String&gt; firstName = <span class="keyword">new</span> ObservableField&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> ObservableField&lt;String&gt; lastName = <span class="keyword">new</span> ObservableField&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> ObservableInt age = <span class="keyword">new</span> ObservableInt();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方式二</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">BaseObservable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bindable</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFirstName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bindable</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLastName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFirstName</span><span class="params">(String firstName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.firstName = firstName;</span><br><span class="line">        notifyPropertyChanged(BR.firstName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">        notifyPropertyChanged(BR.lastName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-生成activitybinding实例并绑定"><a href="#4-生成activitybinding实例并绑定" class="headerlink" title="4 生成activitybinding实例并绑定"></a>4 生成activitybinding实例并绑定</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">   <span class="comment">//获取bind并设置data</span></span><br><span class="line">   MainActivityBinding binding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.activity_main);</span><br><span class="line">   User user = <span class="keyword">new</span> User(<span class="string">"Test"</span>, <span class="string">"User"</span>);</span><br><span class="line">   binding.setUser(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="当数据发生变化时"><a href="#当数据发生变化时" class="headerlink" title="当数据发生变化时"></a>当数据发生变化时</h3><p>会以消息队列的方式发送给对应的activitybinding实例去更新对应的view的值，并进行重新绑定。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Android 逆向工程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/05/Android 逆向工程/" class="article-date">
  	<time datetime="2018-05-04T16:00:00.000Z" itemprop="datePublished">2018-05-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/05/Android 逆向工程/">
        Android 逆向工程
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android-逆向工程"><a href="#Android-逆向工程" class="headerlink" title="Android 逆向工程"></a>Android 逆向工程</h1><h2 id="安装apktool"><a href="#安装apktool" class="headerlink" title="安装apktool"></a>安装apktool</h2><p><a href="https://ibotpeaches.github.io/Apktool/install/" target="_blank" rel="noopener">apktool官网</a></p>
<p>安装说明</p>
<p><img src="http://oc4zuck5v.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-05-05%20%E4%B8%8A%E5%8D%8810.02.27.png" alt=""></p>
<ul>
<li>注意apktool的脚本文件不能有后缀名(sublimetext新建一个无后缀的文件之后将内容拷贝进去)</li>
</ul>
<h2 id="安装dex2jar"><a href="#安装dex2jar" class="headerlink" title="安装dex2jar"></a>安装dex2jar</h2><p><a href="https://github.com/pxb1988/dex2jar/releases">git下载地址</a></p>
<p>下载zip解压待用</p>
<h2 id="安装JD-GUI"><a href="#安装JD-GUI" class="headerlink" title="安装JD-GUI"></a>安装JD-GUI</h2><p><a href="http://jd.benow.ca/" target="_blank" rel="noopener">官网地址</a></p>
<p>下载安装即可(mac版的请下载.jar包那个，安装包的兼容性有问题)</p>
<h2 id="开始简单的反编译之旅"><a href="#开始简单的反编译之旅" class="headerlink" title="开始简单的反编译之旅"></a>开始简单的反编译之旅</h2><h3 id="获取xml反编译文件和smail代码"><a href="#获取xml反编译文件和smail代码" class="headerlink" title="获取xml反编译文件和smail代码"></a>获取xml反编译文件和smail代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//apk文件所在的目录</span><br><span class="line"><span class="built_in">cd</span> /User/shen/Desktop </span><br><span class="line">//获取xml反编译文件和smail代码</span><br><span class="line">apktool d demo.apk</span><br></pre></td></tr></table></figure>
<p>等跑完，里面的资源文件就出来了，还有smail源码，你要是会读的话跟java差不多。</p>
<p>small的语法长这样：</p>
<p><img src="http://oc4zuck5v.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-05-05%20%E4%B8%8A%E5%8D%8811.13.21.png" alt=""></p>
<h3 id="反编译class-dex文件"><a href="#反编译class-dex文件" class="headerlink" title="反编译class.dex文件"></a>反编译class.dex文件</h3><p>将demo.apk复制一份并改后缀名为zip，然后将文件夹里的classes.dex拷贝出来，回到dex2jar 解压的目录下，将文件复制进去。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /Users/shenyonghe/Downloads/dex-tools-2.1</span><br><span class="line">chmod +x ./* </span><br><span class="line">./d2j-dex2jar.sh classes.dex</span><br></pre></td></tr></table></figure>
<p>这个时候文件夹下回多出一个jar文件classes-dex2jar.jar包</p>
<p>注意有的项目会包含多个.dex文件(分包了)，因此要生成多个.jar包进行分析</p>
<p>使用JD-GUI打开对应的classes-dex2jar.jar包</p>
<p>打开后就是下面这个样子的阅读起来就容易多了</p>
<p><img src="http://oc4zuck5v.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-05-05%20%E4%B8%8A%E5%8D%8811.06.01.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-逆向-small语法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/05/逆向-small语法/" class="article-date">
  	<time datetime="2018-05-04T16:00:00.000Z" itemprop="datePublished">2018-05-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/05/逆向-small语法/">
        逆向-small语法
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="逆向-small语法"><a href="#逆向-small语法" class="headerlink" title="逆向-small语法"></a>逆向-small语法</h1><p>Smali，Baksmali分别是指安卓系统里的Java虚拟机（Dalvik）所使用的一种.dex格式文件的汇编器，反汇编器。</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>Dalvik的字节码中拥有两个主要的类型：基类和引用类型。引用类型是对象和数组，其他的一切都是基类。</p>
<h3 id="基类"><a href="#基类" class="headerlink" title="基类"></a>基类</h3><p>基类对照：</p>
<ul>
<li>V        空类型—仅仅可以用来作为返回类型</li>
<li>Z        Boolean 布尔型</li>
<li>B        Byte字节型</li>
<li>S        Short短整型（16位）</li>
<li>C        Char字符型</li>
<li>I        Int 整形</li>
<li>J        long (64 bits)长整型（64位）</li>
<li>F        Float浮点型</li>
<li>D        double (64 bits)双精度型（64位）</li>
</ul>
<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>对象采用这样的形式Lpackage/name/ObjectName—开始的L表明这是一个对象类型，package/name/就是该对象，对象名是是对象的名称，并且分号表明对象名的结束。</p>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><p>格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.class &lt; 访问权限&gt; [ 修饰关键字] &lt; 类名&gt;  </span><br><span class="line">.<span class="keyword">super</span> &lt; 父类名&gt;  </span><br><span class="line">.source &lt;源文件名&gt;  </span><br><span class="line"><span class="comment">//</span></span><br><span class="line">.class <span class="keyword">public</span> La/b/a/a;</span><br><span class="line">.<span class="keyword">super</span> Ljava/lang/Object;</span><br><span class="line">.source <span class="string">"SourceFile"</span></span><br></pre></td></tr></table></figure>
<h2 id="成员变量"><a href="#成员变量" class="headerlink" title="成员变量"></a>成员变量</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># static fields  </span><br><span class="line">.field &lt; 访问权限&gt; <span class="keyword">static</span> [ 修饰关键字] &lt; 字段名&gt;:&lt; 字段类型&gt;  </span><br><span class="line"># instance fields  </span><br><span class="line">.field &lt; 访问权限&gt; [ 修饰关键字] &lt; 字段名&gt;:&lt; 字段类型&gt;</span><br></pre></td></tr></table></figure>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># direct methods                //添加的注释  </span><br><span class="line">.method &lt;访问权限&gt; [ 修饰关键字] &lt; 方法原型&gt;  </span><br><span class="line">    &lt;.locals&gt;                 <span class="comment">//指定了使用的局部变量的个数  </span></span><br><span class="line"> [.parameter]                   <span class="comment">//指定了方法的参数  </span></span><br><span class="line"> [.prologue]                    <span class="comment">//指定了代码的开始处，混淆过的代码可能去掉了该指令  </span></span><br><span class="line"> [.line]                    <span class="comment">//指定了该处指令在源代码中的行号  </span></span><br><span class="line">&lt;代码体&gt;  </span><br><span class="line">.end method</span><br></pre></td></tr></table></figure>
<p>Java虚方法你可以理解为java里所有被overriding的方法都是virtual的,所有重写的方法都是override的。虚方法的声明与直接方法相同，只是起始处的注释为“virtual methods”。</p>
<h3 id="方法调用格式："><a href="#方法调用格式：" class="headerlink" title="方法调用格式："></a>方法调用格式：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Lpackage/name/ObjectName;-&gt;MethodName(III)Z</span><br></pre></td></tr></table></figure>
<p> Lpackage/name/ObjectName; 是一个类， MethodName明显是一个方法名，‘III’在这个例子中是三个整形参数，Z是表示返回一个布尔类型的返回值。</p>
<p>数组：“[I = int[]   [[I = int[][]”</p>
<h3 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h3><p>寄存器总是32位可以存放任何类型的值，2个寄存器可以用来存放64位类型（长整形和双精度型）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invoke-virtual &#123;v0, p1, p2, p3&#125;, Ljava/beans/PropertyChangeSupport;-&gt;firePropertyChange(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V</span><br></pre></td></tr></table></figure>
<p>对于寄存器这里有两种命名方案—标准的V命名方案和对于参数寄存器的P命名方案。</p>
<p>以p命名的第一个寄存器就是方法中的第一个参数寄存器，所以让我们回到之前的总共拥有5个寄存器其中3个参数的例子。下表中显示了为每个寄存器的标准v命名，紧接着是为参数寄存器的p命名</p>
<ul>
<li>v0                 the first local register       第一个本地寄存器</li>
<li>v1                 the second local register  第二个本地寄存器</li>
<li>v2        p0        the first parameter register   第一个参数寄存器</li>
<li>v3        p1        the second parameter register   第二个参数寄存器</li>
<li>v4        p2        the third parameter register   第三个参数寄存器</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Apk二次打包" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/05/Apk二次打包/" class="article-date">
  	<time datetime="2018-05-04T16:00:00.000Z" itemprop="datePublished">2018-05-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/05/Apk二次打包/">
        Apk二次打包
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Apk二次打包"><a href="#Apk二次打包" class="headerlink" title="Apk二次打包"></a>Apk二次打包</h1><h2 id="首先反编译获得smali文件"><a href="#首先反编译获得smali文件" class="headerlink" title="首先反编译获得smali文件"></a>首先反编译获得smali文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apktool d demo.apk</span><br></pre></td></tr></table></figure>
<h2 id="找到要注入的方法并添加smali方法调用"><a href="#找到要注入的方法并添加smali方法调用" class="headerlink" title="找到要注入的方法并添加smali方法调用"></a>找到要注入的方法并添加smali方法调用</h2><ul>
<li>添加方法记得修改被注入方法的寄存器个数</li>
</ul>
<h2 id="修改后的smali进行打包"><a href="#修改后的smali进行打包" class="headerlink" title="修改后的smali进行打包"></a>修改后的smali进行打包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apktool b demo</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Android P" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/04/29/Android P/" class="article-date">
  	<time datetime="2018-04-28T16:00:00.000Z" itemprop="datePublished">2018-04-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/29/Android P/">
        Android P
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android-P"><a href="#Android-P" class="headerlink" title="Android P"></a>Android P</h1><h2 id="P-中的变更"><a href="#P-中的变更" class="headerlink" title="P 中的变更"></a>P 中的变更</h2><h3 id="基于RTT的室内定位技术"><a href="#基于RTT的室内定位技术" class="headerlink" title="基于RTT的室内定位技术"></a>基于RTT的室内定位技术</h3><p>原理：根据WiFi的信号强度来判断举例，实现多个AP点三线可以确定一个三维的点的特性。</p>
<p>这里我要吐槽一下，2010-2013年间，我还在大学的时候爱立信曾经对这块研究过，并开放了api，以及如何布AP的具体实现细节，我在实验室也搞过，总体下来感觉坑特多。首先也是最重要的既然是室内定位，那肯定涉及到WiFi穿墙后的信号衰减问题，而且不同的室内结构的墙体的多少材质厚度都不同，很难有统一的算法来实现对这块的弥补，这也是后来爱立信公司放弃这块技术的主要原因。我看了一下Google这次推出这个技术，也没有相对对这个问题完善的解决方案，想来也是先推出来占个坑，后续优化吧。</p>
<p>前景：我认为室内定位的前景还是非常好的，而且RTT技术是AP无感的，安全也可以保证。</p>
<h3 id="屏幕缺口支持"><a href="#屏幕缺口支持" class="headerlink" title="屏幕缺口支持"></a>屏幕缺口支持</h3><p>Android P 支持最新的全面屏以及为摄像头和扬声器预留空间的凹口屏幕。幸运的是，选择凹口屏幕的大小。</p>
<p>为了更多的屏占比，对齐刘海的支持，给你们看一下预览图，随意感受下。(我实在欣赏不来)</p>
<p><img src="http://oc4zuck5v.bkt.clouddn.com/emulator-devoptions-cutout_2x.png" alt=""></p>
<p>辣眼睛</p>
<p><img src="http://oc4zuck5v.bkt.clouddn.com/timg.png" alt=""></p>
<h3 id="通知"><a href="#通知" class="headerlink" title="通知"></a>通知</h3><p>Android P 引入了多个通知增强功能：</p>
<ul>
<li>1 支持图像：现在，Android P 可在手机的“短信通知”中显示图像。 您可以使用短信中的 setData() 来显示图像。</li>
<li>2 简化了针对对话参与者的支持：全新的 Notification.Person 类可用于识别参与对话的人员，包括他们的头像和 URI。 现在，许多其他 API（如 addMessage()）均可利用 Person 类，而不是 CharSequence。(Message)</li>
<li>3 将回复另存为草稿。</li>
<li>4 确定对话是否为群组对话。</li>
<li>5 允许为操作提供语义含义，如标记为已读、删除、回复等。</li>
<li>6 SmartReply：Android P 支持您的短信应用中提供的建议回复。 使用 RemoteInput.setChoices() 为用户提供一组标准回复。</li>
<li>7 渠道设置、广播和请勿打扰</li>
</ul>
<h3 id="多摄像头支持和摄像头更新"><a href="#多摄像头支持和摄像头更新" class="headerlink" title="多摄像头支持和摄像头更新"></a>多摄像头支持和摄像头更新</h3><p>在运行 Android P 的设备上，您可以通过两个或更多物理摄像头来同时访问多个视频流。</p>
<p>在受支持的设备上，Android P 还支持外置 USB/UVC 摄像头。</p>
<h3 id="适用于位图和可绘制对象的-ImageDecoder"><a href="#适用于位图和可绘制对象的-ImageDecoder" class="headerlink" title="适用于位图和可绘制对象的 ImageDecoder"></a>适用于位图和可绘制对象的 ImageDecoder</h3><p>Android P 引入 ImageDecoder ，以提供现代化的图像解码方法。 您应使用 ImageDecoder 来解码图像，而不是使用 BitmapFactory 和 BitmapFactory.Options API。</p>
<ul>
<li>要将解码的图像缩放到精确尺寸，请以目标尺寸为参数，调用 setResize()。 您也可以使用样图尺寸来缩放图像。 </li>
</ul>
<p>对于开发者来说这个是重点，算是非常重大的改动。重点就在这个精准，以前对bitmap做质量压缩的时候参数只接受整数倍的。我举个例子，现在有张图，需要安质量压缩为原来的1.5分之一，也就是缩放1.5倍，也就是质量压缩2.25倍，但如果只接受整数倍的话你要么缩放四倍，要么不缩放，这就蛋疼了。</p>
<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><p>Android P 引入了一个新的 AnimatedImageDrawable 类，用于绘制和显示 GIF 和 WebP 动画图像。</p>
<h3 id="Neural-Networks-API-1-1"><a href="#Neural-Networks-API-1-1" class="headerlink" title="Neural Networks API 1.1"></a>Neural Networks API 1.1</h3><p>Android 8.1（API 级别 27）中引入了 Neural Networks API 以加快 Android 设备上机器学习的速度。 Android P 扩展并改进了该 API，从而增加了对 Pad、BatchToSpaceND、SpaceToBatchND、Transpose、Strided Slice、Mean、Div、Sub 和 Squeeze 九个新运算的支持。</p>
<h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><h3 id="新增的-APK-密钥轮转"><a href="#新增的-APK-密钥轮转" class="headerlink" title="新增的 APK 密钥轮转"></a>新增的 APK 密钥轮转</h3><p>Android P 添加了对 APK Signature Scheme v3 的支持。该架构提供的选择可以在其签名块中为每个签名证书加入一条轮转证据记录。 应用可以通过将 APK 文件过去的签名证书链接到现在签署应用时使用的证书，使用新签名证书来签署应用。</p>
<h3 id="传输层安全协议-TLS-实现变更"><a href="#传输层安全协议-TLS-实现变更" class="headerlink" title="传输层安全协议 (TLS) 实现变更"></a>传输层安全协议 (TLS) 实现变更</h3><h3 id="对-ChaCha20-流式传输加密的支持"><a href="#对-ChaCha20-流式传输加密的支持" class="headerlink" title="对 ChaCha20 流式传输加密的支持"></a>对 ChaCha20 流式传输加密的支持</h3><h3 id="统一的指纹身份验证对话框"><a href="#统一的指纹身份验证对话框" class="headerlink" title="统一的指纹身份验证对话框"></a>统一的指纹身份验证对话框</h3><p>可以选择使用，也可以不用。</p>
<h3 id="高可信度用户确认"><a href="#高可信度用户确认" class="headerlink" title="高可信度用户确认"></a>高可信度用户确认</h3><p>发布时安装有 Android P 的受支持设备赋予您使用 Protected Confirmation API 的能力。 借助这个新增的 API，应用可以利用 ConfirmationDialog 的实例向用户显示提示，请他们批准一个简短的声明。 应用可以通过这个声明再次确认，用户确实想完成一项敏感事务，例如付款。</p>
<h3 id="硬件安全性模块"><a href="#硬件安全性模块" class="headerlink" title="硬件安全性模块"></a>硬件安全性模块</h3><p>Android P 的受支持设备可拥有 StrongBox Keymaster，这个 Keymaster HAL 的实现位于一个硬件安全性模块内。 该模块包含自己的 CPU、安全存储空间、真实随机数生成器以及抵御软件包篡改和未经授权线刷应用的附加机制。 检查存储在 StrongBox Keymaster 中的密钥时，系统会通过可信执行环境 (TEE) 证实密钥的完整性。</p>
<h3 id="保护对密钥库进行的密钥导入"><a href="#保护对密钥库进行的密钥导入" class="headerlink" title="保护对密钥库进行的密钥导入"></a>保护对密钥库进行的密钥导入</h3><p>Android P 增加了密钥加密的安全性，添加了利用新增的 ASN.1 编码密钥格式将已加密密钥安全导入密钥库的功能。 Keymaster 随后会在密钥库中将密钥解密，因此密钥的内容永远不会以明文形式出现在设备的主机内存中。</p>
<h3 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h3><p>为避免无意的旋转，我们新增了一个模式，哪怕设备位置发生变化，也会固定在当前屏幕方向上。 必要时用户可以通过按系统栏上的一个新增按钮手动触发旋转。</p>
<h2 id="兼容性问题"><a href="#兼容性问题" class="headerlink" title="兼容性问题"></a>兼容性问题</h2><h3 id="对于非-SDK-接口的限制"><a href="#对于非-SDK-接口的限制" class="headerlink" title="对于非 SDK 接口的限制"></a>对于非 SDK 接口的限制</h3><p>Android P 引入了针对非 SDK 接口的使用限制，无论是直接使用还是通过反射或 JNI 间接使用。 无论应用是引用非 SDK 接口还是尝试使用反射或 JNI 获取其句柄，均适用这些限制。 </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2018 ShenYonghe
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>