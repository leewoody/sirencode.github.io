<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>Diablo</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_859455_eaq7v6w8ktj.css">
</head>
<body>
<header class="header">
    <div class="header-inner">
        <div class="header-title">

        </div>
        <nav class="header-nav">
            
            <a href="/" class="header-nav-link" >
                首页
            </a>
            

            
            <a href="/archives" class="header-nav-link">
                归档
            </a>
            

            
            <a href="/tags" class="header-nav-link">
                标签
            </a>
            

            
            <a href="/about/" class="header-nav-link">
                关于
            </a>
            
        </nav>
    </div>
</header>
<header class="mobile-header">
    <div class="mobile-nav">
        <div class="mobile-nav-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="mobile-nav-title">
            <a href="/" class="mobile-nav-title-link">ShenYonghe's Blog</a>
        </div>

    </div>
    <nav class="mobile-menu">
        <ul class="mobile-menu-list">
            <li class="mobile-menu-item">
                <i class="iconfont icon-home"></i>
                <a href="/" class="mobile-nav-link">首页</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-archive"></i>
                <a href="/archives" class="mobile-nav-link">归档</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-tag"></i>
                <a href="/tags" class="mobile-nav-link">标签</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-about"></i>
                <a href="/about/" class="mobile-nav-link">关于</a>
            </li>
        </ul>
    </nav>
</header>
<div class="main">
    <div class="content-inner">
        <div class="posts">
    <article class="post-whole">
        <div class="post-title">
            <h2 class="title">dir505 科学上网</h2>
            <div class="post-meta">
                <span class="post-time">2018-06-16</span>
                
                <span class="post-visit"> 阅读次数：<span id="busuanzi_value_page_pv"></span></span>
            </div>
        </div>
        <div class="post-toc" id="post-toc">
    <strong class="post-toc-title">目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#dir505-科学上网"><span class="toc-text">dir505 科学上网</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#dir505-升级国际版固件"><span class="toc-text">dir505 升级国际版固件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#刷openwrt"><span class="toc-text">刷openwrt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置openwrt"><span class="toc-text">配置openwrt</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开启wifi"><span class="toc-text">开启wifi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置时区"><span class="toc-text">设置时区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#中继路由设置"><span class="toc-text">中继路由设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重启network"><span class="toc-text">重启network</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装ss"><span class="toc-text">安装ss</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#刷成砖恢复"><span class="toc-text">刷成砖恢复</span></a></li></ol></li></ol>
    <div class="back-to-top" id="back-to-top">
        <a href="javascript:void(0);">回到顶部</a>
    </div>
</div>
        <div class="post-content">
            <h1 id="dir505-科学上网"><a href="#dir505-科学上网" class="headerlink" title="dir505 科学上网"></a>dir505 科学上网</h1><h2 id="dir505-升级国际版固件"><a href="#dir505-升级国际版固件" class="headerlink" title="dir505 升级国际版固件"></a>dir505 升级国际版固件</h2><p><a href="http://support.dlink.com.au/download/download.aspx?product=DIR-505" target="_blank" rel="noopener">国际版固件地址</a></p>
<p>利用16进制编辑器将‘DEF’替换为‘CN’,之后通过路由器的固件升级升级固件。</p>
<h2 id="刷openwrt"><a href="#刷openwrt" class="headerlink" title="刷openwrt"></a>刷openwrt</h2><p><a href="https://archive.openwrt.org/releases/" target="_blank" rel="noopener">openwrt</a> 之后找到dir-505的固件下载(包含factory的那个),通过固件升级的方式刷。</p>
<h2 id="配置openwrt"><a href="#配置openwrt" class="headerlink" title="配置openwrt"></a>配置openwrt</h2><ul>
<li><p>注意安装完openwrt在WiFi中将找不到对应的路由信号，这是因为openwrt默认没有开启无线功能，这时候不要慌，网线连接电脑进行配置即可。</p>
</li>
<li><p>1 首先向电脑的本地网卡设置为固定ip:192.168.1.x,子网掩码：255.255.0.0</p>
</li>
<li>2 telnet 192.168.1.1</li>
<li>3 设置root密码</li>
<li>4 mac ssh win putty 192.168.1.1</li>
</ul>
<h3 id="开启wifi"><a href="#开启wifi" class="headerlink" title="开启wifi"></a>开启wifi</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uci set wireless.@wifi-device[0].disabled=0</span><br><span class="line">uci set wireless.@wifi-iface[0].ssid='wifiname'</span><br><span class="line">uci set wireless.@wifi-iface[0].encryption='psk2'</span><br><span class="line">uci set wireless.@wifi-iface[0].key='password'</span><br><span class="line">uci commit wireless</span><br></pre></td></tr></table></figure>
<h3 id="设置时区"><a href="#设置时区" class="headerlink" title="设置时区"></a>设置时区</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uci set system.@system[0].zonename='Asia/Shanghai'</span><br><span class="line">uci set system.@system[0].timezone='CST-8'</span><br><span class="line">uci commit system</span><br></pre></td></tr></table></figure>
<h3 id="中继路由设置"><a href="#中继路由设置" class="headerlink" title="中继路由设置"></a>中继路由设置</h3><p>如果你需要将你的路由作为二级路由使用请设置中继192.168.0.x，因为192.168.1.1已经被一级路由占用。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">uci delete network.lan.ifname</span><br><span class="line">uci delete network.lan.type</span><br><span class="line">uci add network interface</span><br><span class="line">uci rename network.@interface[-1]='wan'</span><br><span class="line">uci set network.@interface[-1].ifname='eth1'</span><br><span class="line">uci set network.wan.proto=static</span><br><span class="line">uci set network.wan.ipaddr=192.168.1.123</span><br><span class="line">uci set network.wan.netmask=255.255.255.0</span><br><span class="line">uci set network.wan.gateway=192.168.1.1</span><br><span class="line">uci set network.wan.dns='114.114.114.114 114.114.115.115'</span><br><span class="line">uci set network.lan.ipaddr=192.168.0.1</span><br><span class="line">uci set network.lan.dns='114.114.114.114 114.114.115.115'</span><br><span class="line">uci commit network</span><br></pre></td></tr></table></figure>
<h3 id="重启network"><a href="#重启network" class="headerlink" title="重启network"></a>重启network</h3><p>/etc/init.d/network restart</p>
<h2 id="安装ss"><a href="#安装ss" class="headerlink" title="安装ss"></a>安装ss</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">//中文后台</span><br><span class="line">opkg install install luci-i18n-base-zh-cn</span><br><span class="line">opkg install luci-app-shadowsocks-libev</span><br><span class="line">opkg install luci-i18n-shadowsocks-libev-zh-cn</span><br><span class="line">opkg install shadowsocks-libev</span><br></pre></td></tr></table></figure>
<p>注意安装顺序：最后安装shadowsocks-libev,安装完这个就默认设置一个本地代理导致网络无法访问了。</p>
<h2 id="刷成砖恢复"><a href="#刷成砖恢复" class="headerlink" title="刷成砖恢复"></a>刷成砖恢复</h2><p>dir-505号称刷不坏的神机：</p>
<p>恢复模式设置：</p>
<ul>
<li>1 将电脑的本地网卡设置为固定IP：192.168.0.x 子网掩码:255.255.0.0</li>
<li>2 断电情况按住路由的reset之后通电等到红灯闪烁松开reset</li>
<li>3 电脑打开192.168.1.1便可上传固件了</li>
</ul>

        </div>
        
    </article>
</div>
<div class="paginator">
    
        
            <a class="prev" href="/2018/07/06/Android 模块化 /">
                <i class="iconfont icon-prev"></i>
                <span class="nav-default">Android 模块化</span>
                <span class="nav-mobile">上一篇</span>
            </a>
        
        
            <a class="next" href="/2018/06/11/Android 输入系统/">
                <span class="nav-default">Android 输入系统</span>
                <span class="nav-mobile">下一篇</span>
                <i class="iconfont icon-next"></i>
            </a>
        
    
</div>
<div id="comment-container"></div>
    </div>
</div>
<footer class="footer-social">
    

    

    

    <div class="footer-copyright">
        <p class="time-line">
            &copy;
            
            
            2018
            &nbsp;<i class="iconfont icon-heart"></i>&nbsp;
            <a target="_blank" href="https://github.com/iJinxin">ShenYonghe</a>
        </p>
        <p class="theme-info">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme -
            <a target="_blank" href="https://github.com/iJinxin/hexo-theme-sky">Sky</a>
        </p>
    </div>
</footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    

</script>
</html>
